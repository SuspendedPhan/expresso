// PROCESS.txt

#######
Domain
#######

ObjectInstance: Represents a specific object on the canvas.
PropertyInstance: Represents a property on an object instance.
CanvasObject: An object on the canvas, provided by the rendering library.
PropertySetter: A function that sets a property on a canvas object.

#######
Process
#######

---
GetRootObjects - Retrieves the root objects from the project.
--->


--->
ExtractPropertyPaths - Extracts property paths from the object hierarchy.
    - Objects
--->
for object in objects:
    for property in object.properties:
        yield PropertyPath(object, property)
    for component in object.components:
        for property in component.properties:
            yield PropertyPath(object, component, property)
        for child in component.children:
            for property in child.properties:
                yield PropertyPath(object, component, child, property)
--->


--->
AnnotateCloneCounts - Annotates property paths with clone counts.
    - CloneCountPropertyPaths
    - NonCloneCountPropertyPaths
--->
CloneCountResults =
    for path in CloneCountPropertyPaths:
        count = EvaluateCloneCount(path)
        yield CloneCountResult(path, count)

yield AnnotatedPropertyPaths =
    for path in NonCloneCountPropertyPaths:
        annotatedSegments =
            for segment in path:
                yield AnnotatedSegment(segment, CloneCountResults)
        yield AnnotatedPropertyPath(annotatedSegments)            


---
ExpandInstancePaths - Converts PropertyPaths to PropertyInstancePaths by expanding clone counts.
    - AnnotatedPropertyPaths
--->
yield PropertyInstancePaths = for path in AnnotatedPropertyPaths:
    for instance in ExpandInstancePath(path):
        yield instance

function ExpandInstancePath(AnnotatedPathSegments):
    firstAnnotatedPathSegment, restAnnotatedPathSegments = ExtractFirstSegment(AnnotatedPathSegments)
    if firstAnnotatedPropertySegment.hasCloneCount:
        for i in range(firstAnnotatedPropertySegment.count):
            firstInstancePath = InstancePath(firstAnnotatedPropertySegment, i)
            restInstancePaths = ExpandInstancePath(restAnnotatedPathSegments)
            for instancePath in restInstancePaths:
                yield PropertyInstancePath = CombinePath(firstInstancePath, instancePath)
    else:
        yield* ExpandInstancePath(restAnnotatedPathSegments)


---
EvaluatePropertyInstances - Evaluates property instance paths to compute their corresponding values.
--->



---
GroupObjectInstances - Nests property results into their object instances.
--->



---
AcquireCanvasObjects - Acquires CanvasObjects for each object instance.
--->



---
ExtractCanvasProperties - Extracts individual properties from library canvas objects for further processing.
--->



---
MapPropertySetters - Maps extracted properties to their corresponding setter functions.
    - needs GetPropertySetter(property)
--->



---
ExecutePropertySetters - Applies the setter functions to update the properties on library canvas objects.
---
