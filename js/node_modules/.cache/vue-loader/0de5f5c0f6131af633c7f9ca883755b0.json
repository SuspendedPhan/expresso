{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/Home.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/Home.vue","mtime":1714946187070},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js","mtime":1714947394795},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBWaWV3cG9ydCBmcm9tICIuL1ZpZXdwb3J0IjsKaW1wb3J0IEV4cHJlc3NvciBmcm9tICIuL0V4cHJlc3NvciI7CmltcG9ydCBTdG9yZUdyYXBoIGZyb20gIi4vU3RvcmVHcmFwaCI7CmltcG9ydCBUZXN0UnVubmVyIGZyb20gIi4vdGVzdHMvVGVzdFJ1bm5lci52dWUiOwppbXBvcnQgUm9vdCBmcm9tICIuLi9zdG9yZS9Sb290IjsKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgV2FzbUV4cHJlc3NvciBmcm9tICJAL2NvbXBvbmVudHMvV2FzbUV4cHJlc3NvciI7CmltcG9ydCBXYXNtTW9kdWxlIGZyb20gIi4uLy4uL3B1YmxpYy9XYXNtTW9kdWxlIjsKaW1wb3J0IFdhc20gZnJvbSAiLi4vLi4vcHVibGljL1dhc21Nb2R1bGUud2FzbSI7CmltcG9ydCBGdW5jdGlvbnMgZnJvbSAiQC9jb2RlL0Z1bmN0aW9ucyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWUiLAogIGNvbXBvbmVudHM6IHsKICAgIFdhc21FeHByZXNzb3IsCiAgICBWaWV3cG9ydCwKICAgIEV4cHJlc3NvciwKICAgIFRlc3RSdW5uZXIsCiAgICBTdG9yZUdyYXBoLAogIH0sCiAgcHJvcHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dFeHByZXNzb3I6IHRydWUsCiAgICAgIHNob3dTdG9yZUdyYXBoOiBmYWxzZSwKICAgICAgb2xkRXhwcmVzc29yOiBmYWxzZSwKICAgICAgdHJlZTogbnVsbAogICAgfTsKICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICBSb290LmxvYWQoKTsKICAgIFJvb3Qub3JnYW5pc21Db2xsZWN0aW9uLmluaXRSb290T3JnYW5pc20oKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCAoZXZlbnQpID0+IHsKICAgICAgcmV0dXJuOwogICAgICBpZiAoZXZlbnQua2V5ID09PSAiQXJyb3dVcCIgJiYgIVJvb3QucGVuU3RvcmUuZ2V0SXNRdWVyeWluZygpKSB7CiAgICAgICAgUm9vdC5wZW5TdG9yZS5tb3ZlQ3Vyc29yVXAoKTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gIkFycm93RG93biIgJiYgIVJvb3QucGVuU3RvcmUuZ2V0SXNRdWVyeWluZygpKSB7CiAgICAgICAgUm9vdC5wZW5TdG9yZS5tb3ZlQ3Vyc29yRG93bigpOwogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0KCiAgICAgIGlmIChSb290LnBlblN0b3JlLmdldFBlblBvc2l0aW9uKCkucG9zaXRpb25UeXBlID09PSAiTm9kZSIpIHsKICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAiRW50ZXIiKSB7CiAgICAgICAgICBSb290LnBlblN0b3JlLnNldElzUXVlcnlpbmcodHJ1ZSk7CiAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgIGV2ZW50LmtleSA9PT0gIkFycm93TGVmdCIgJiYKICAgICAgICAgICFSb290LnBlblN0b3JlLmdldElzUXVlcnlpbmcoKQogICAgICAgICkgewogICAgICAgICAgUm9vdC5wZW5TdG9yZS5tb3ZlQ3Vyc29yTGVmdCgpOwogICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICBldmVudC5rZXkgPT09ICJBcnJvd1JpZ2h0IiAmJgogICAgICAgICAgIVJvb3QucGVuU3RvcmUuZ2V0SXNRdWVyeWluZygpCiAgICAgICAgKSB7CiAgICAgICAgICBSb290LnBlblN0b3JlLm1vdmVDdXJzb3JSaWdodCgpOwogICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSAiRXNjYXBlIiAmJiBSb290LnBlblN0b3JlLmdldElzUXVlcnlpbmcoKSkgewogICAgICAgICAgUm9vdC5wZW5TdG9yZS5zZXRJc1F1ZXJ5aW5nKGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIFJvb3QucGVuLmV2ZW50cy5vbigiYWZ0ZXJQZW5Db21taXQiLCAoKSA9PiB7CiAgICAgIFJvb3Quc2F2ZSgpOwogICAgfSk7CgogICAgVnVlLmNvbmZpZy5lcnJvckhhbmRsZXIgPSAoZXJyLCB2bSwgaW5mbykgPT4gewogICAgICB0aGlzLmNvbnNvbGVFcnJvciA9IHRydWU7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgY29uc29sZS5lcnJvcihpbmZvKTsKICAgIH07CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIiwgKCkgPT4gewogICAgICB0aGlzLmNvbnNvbGVFcnJvciA9IHRydWU7CiAgICB9KTsKCiAgICAvLyAtLS0gbmV3IHN0dWZmIC0tLQoKICAgIGNvbnN0IG1vZHVsZSA9IGF3YWl0IFdhc21Nb2R1bGUoewogICAgICBsb2NhdGVGaWxlOiAocGF0aCkgPT4gewogICAgICAgIGlmIChwYXRoLmVuZHNXaXRoKCcud2FzbScpKSB7CiAgICAgICAgICByZXR1cm4gV2FzbTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHBhdGg7CiAgICAgIH0sCiAgICB9KTsKCiAgICBjb25zdCB0cmVlID0gbmV3IG1vZHVsZS5FeHByZXNzb3JUcmVlKCk7CiAgICBtb2R1bGUuRXhwcmVzc29yVHJlZS5wb3B1bGF0ZVRlc3RUcmVlKHRyZWUpOwogICAgY29uc3QgYXR0cmlidXRlVmVjdG9yID0gdHJlZS5nZXRSb290T3JnYW5pc20oKS5nZXRBdHRyaWJ1dGVzKCk7CiAgICBjb25zdCBhdHRyaWJ1dGVzID0gRnVuY3Rpb25zLnZlY3RvclRvQXJyYXkoYXR0cmlidXRlVmVjdG9yKTsKICAgIGNvbnN0IG51bWJlck5vZGUgPSBtb2R1bGUuTnVtYmVyTm9kZS5tYWtlKDUpOwogICAgY29uc29sZS5sb2cobnVtYmVyTm9kZSk7CiAgICB3aW5kb3cubnVtYmVyTm9kZSA9IG51bWJlck5vZGU7CiAgICAvLyBjb25zb2xlLmxvZygnaGknKTsKICAgIC8vIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGF0dHJpYnV0ZXMpIHsKICAgIC8vICAgY29uc29sZS5sb2coYXR0cmlidXRlLmdldE5hbWUoKSk7CiAgICAvLyB9CiAgICBhdHRyaWJ1dGVzWzBdLmdldFJvb3ROb2RlKCkucmVwbGFjZShudW1iZXJOb2RlKTsKCiAgICB7CiAgICAgIGNvbnN0IGF0dHJpYnV0ZVZlY3RvciA9IHRyZWUuZ2V0Um9vdE9yZ2FuaXNtKCkuZ2V0QXR0cmlidXRlcygpOwogICAgICBjb25zdCBhdHRyaWJ1dGVzID0gRnVuY3Rpb25zLnZlY3RvclRvQXJyYXkoYXR0cmlidXRlVmVjdG9yKTsKICAgICAgY29uc29sZS5sb2coYXR0cmlidXRlcy5nZXQoMCkuZ2V0Um9vdE5vZGUoKS5nZXRWYWx1ZSgpKTsKICAgIH0KICAgIHRoaXMudHJlZSA9IHRyZWU7CiAgfSwKfTsK"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"home\">\n    <template v-if=\"!showStoreGraph\">\n      <template v-if=\"showExpressor\">\n        <Expressor class=\"expressor\" v-if=\"oldExpressor\"/>\n        <WasmExpressor class=\"expressor\" v-else-if=\"tree\" project=\"tree\"/>\n      </template>\n      <Viewport :class=\"['viewport', { fullWidth: !showExpressor }]\" />\n    </template>\n    <StoreGraph v-else></StoreGraph>\n    <TestRunner v-if=\"false\" class=\"runner\" />\n    <button class=\"flick\" @click=\"showExpressor = !showExpressor\">Flick</button>\n    <button class=\"storeGraph\" @click=\"showStoreGraph = !showStoreGraph\">\n      Show Store Graph\n    </button>\n  </div>\n</template>\n\n<script>\nimport Viewport from \"./Viewport\";\nimport Expressor from \"./Expressor\";\nimport StoreGraph from \"./StoreGraph\";\nimport TestRunner from \"./tests/TestRunner.vue\";\nimport Root from \"../store/Root\";\nimport Vue from \"vue\";\nimport WasmExpressor from \"@/components/WasmExpressor\";\nimport WasmModule from \"../../public/WasmModule\";\nimport Wasm from \"../../public/WasmModule.wasm\";\nimport Functions from \"@/code/Functions\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    WasmExpressor,\n    Viewport,\n    Expressor,\n    TestRunner,\n    StoreGraph,\n  },\n  props: {},\n  data: function () {\n    return {\n      showExpressor: true,\n      showStoreGraph: false,\n      oldExpressor: false,\n      tree: null\n    };\n  },\n  async mounted() {\n    Root.load();\n    Root.organismCollection.initRootOrganism();\n    document.addEventListener(\"keydown\", (event) => {\n      return;\n      if (event.key === \"ArrowUp\" && !Root.penStore.getIsQuerying()) {\n        Root.penStore.moveCursorUp();\n        event.preventDefault();\n      } else if (event.key === \"ArrowDown\" && !Root.penStore.getIsQuerying()) {\n        Root.penStore.moveCursorDown();\n        event.preventDefault();\n      }\n\n      if (Root.penStore.getPenPosition().positionType === \"Node\") {\n        if (event.key === \"Enter\") {\n          Root.penStore.setIsQuerying(true);\n        } else if (\n          event.key === \"ArrowLeft\" &&\n          !Root.penStore.getIsQuerying()\n        ) {\n          Root.penStore.moveCursorLeft();\n        } else if (\n          event.key === \"ArrowRight\" &&\n          !Root.penStore.getIsQuerying()\n        ) {\n          Root.penStore.moveCursorRight();\n        } else if (event.key === \"Escape\" && Root.penStore.getIsQuerying()) {\n          Root.penStore.setIsQuerying(false);\n        }\n      }\n    });\n\n    Root.pen.events.on(\"afterPenCommit\", () => {\n      Root.save();\n    });\n\n    Vue.config.errorHandler = (err, vm, info) => {\n      this.consoleError = true;\n      console.error(err);\n      console.error(info);\n    };\n\n    window.addEventListener(\"error\", () => {\n      this.consoleError = true;\n    });\n\n    // --- new stuff ---\n\n    const module = await WasmModule({\n      locateFile: (path) => {\n        if (path.endsWith('.wasm')) {\n          return Wasm;\n        }\n        return path;\n      },\n    });\n\n    const tree = new module.ExpressorTree();\n    module.ExpressorTree.populateTestTree(tree);\n    const attributeVector = tree.getRootOrganism().getAttributes();\n    const attributes = Functions.vectorToArray(attributeVector);\n    const numberNode = module.NumberNode.make(5);\n    console.log(numberNode);\n    window.numberNode = numberNode;\n    // console.log('hi');\n    // for (const attribute of attributes) {\n    //   console.log(attribute.getName());\n    // }\n    attributes[0].getRootNode().replace(numberNode);\n\n    {\n      const attributeVector = tree.getRootOrganism().getAttributes();\n      const attributes = Functions.vectorToArray(attributeVector);\n      console.log(attributes.get(0).getRootNode().getValue());\n    }\n    this.tree = tree;\n  },\n};\n</script>\n<style scoped>\n.runner {\n  bottom: 0px;\n  right: 0px;\n  position: absolute;\n  padding: 10px;\n}\n.home {\n  display: grid;\n  position: absolute;\n  grid-template-columns: 50% 1fr;\n  grid-template-rows: 100%;\n  height: 100%;\n  width: 100%;\n  /* height: calc(100% - 40px);\n  width: calc(100% - 40px); */\n  overflow: hidden;\n  /* gap: 20px; */\n  /* padding: 20px; */\n}\n.viewport {\n  /* margin: 20px; */\n  /* border-color: black;\n  border-style: solid;\n  border-width: 1px; */\n  z-index: 1;\n}\n.expressor {\n  overflow-x: visible;\n  overflow-y: visible;\n}\n.flick {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n}\n.storeGraph {\n  position: absolute;\n  bottom: 10px;\n  left: 75px;\n}\n.fullWidth {\n  grid-column: 1 / -1;\n}\n</style>"]}]}