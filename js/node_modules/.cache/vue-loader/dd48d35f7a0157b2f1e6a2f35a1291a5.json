{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmAttribute.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmAttribute.vue","mtime":1714946187072},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js","mtime":1714947394795},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/ts-loader/index.js","mtime":1714947267504},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgppbXBvcnQgQ29tcG9uZW50IGZyb20gInZ1ZS1jbGFzcy1jb21wb25lbnQiOwppbXBvcnQge1Byb3AsIFByb3ZpZGUsIFdhdGNofSBmcm9tICJ2dWUtcHJvcGVydHktZGVjb3JhdG9yIjsKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgV2FzbU5vZGUgZnJvbSAiQC9jb21wb25lbnRzL1dhc21Ob2RlLnZ1ZSI7CmltcG9ydCB7RWxlbWVudExheW91dH0gZnJvbSAiQC9jb2RlL0VsZW1lbnRMYXlvdXQiOwppbXBvcnQgVHJlZUxheW91dCBmcm9tICJAL2NvbXBvbmVudHMvVHJlZUxheW91dC52dWUiOwppbXBvcnQgU3RvcmUgZnJvbSAiQC9tb2RlbHMvU3RvcmUiOwoKQENvbXBvbmVudCh7CiAgY29tcG9uZW50czoge1RyZWVMYXlvdXQsIFdhc21Ob2RlfQp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBXYXNtQXR0cmlidXRlIGV4dGVuZHMgVnVlIHsKICBAUHJvcCgpIGF0dHJpYnV0ZTsKCiAgQFByb3ZpZGUoKSBub2RlTGF5b3V0ID0gbmV3IEVsZW1lbnRMYXlvdXQoKCkgPT4gdGhpcy5nZXRSb290Tm9kZSgpLCBub2RlID0+IFN0b3JlLmdldENoaWxkcmVuKG5vZGUpLCBXYXNtQXR0cmlidXRlLmdldEtleSwgaG9yaXpvbnRhbE1hcmdpbiwgdmVydGljYWxNYXJnaW4pOwoKICBuYW1lID0gbnVsbDsKICByb290Tm9kZSA9IG51bGw7CiAgcm9vdE5vZGVJZCA9IG51bGw7CgogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICB0aGlzLm5hbWUgPSB0aGlzLmF0dHJpYnV0ZS5nZXROYW1lKCk7CiAgICBpZiAodGhpcy5hdHRyaWJ1dGUuY29uc3RydWN0b3IubmFtZSA9PT0gJ0VkaXRhYmxlQXR0cmlidXRlJykgewogICAgICB0aGlzLnJvb3ROb2RlID0gdGhpcy5hdHRyaWJ1dGUuZ2V0Um9vdE5vZGUoKTsKICAgICAgKHdpbmRvdyBhcyBhbnkpLndhc21Nb2R1bGUuRW1iaW5kVXRpbC5zZXRTaWduYWxMaXN0ZW5lcih0aGlzLmF0dHJpYnV0ZS5nZXRPbkNoYW5nZWRTaWduYWwoKSwgKCkgPT4gdGhpcy5vblJvb3ROb2RlQ2hhbmdlZCgpKTsKICAgIH0KICB9CgogIHByaXZhdGUgZ2V0Um9vdE5vZGUoKSB7CiAgICByZXR1cm4gdGhpcy5yb290Tm9kZTsKICB9CgogIHByaXZhdGUgb25Sb290Tm9kZUNoYW5nZWQoKSB7CiAgICBjb25zdCByb290Tm9kZSA9IHRoaXMuYXR0cmlidXRlLmdldFJvb3ROb2RlKCk7CiAgICB0aGlzLnJvb3ROb2RlID0gcm9vdE5vZGU7CiAgICB0aGlzLnJvb3ROb2RlSWQgPSByb290Tm9kZS5nZXRJZCgpOwogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICB0aGlzLm5vZGVMYXlvdXQucmVjYWxjdWxhdGUoKTsKICAgIH0pOwogIH0KCiAgc3RhdGljIGdldEtleShub2RlKSB7CiAgICByZXR1cm4gbm9kZS5nZXRJZCgpOwogIH0KfQoK"},{"version":3,"sources":["WasmAttribute.vue"],"names":[],"mappings":";;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"WasmAttribute.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div>{{name}}</div>\n    <TreeLayout :elementLayout=\"nodeLayout\">\n      <WasmNode v-if=\"rootNode\" :node=\"rootNode\" :key=\"rootNodeId\"></WasmNode>\n    </TreeLayout>\n  </div>\n</template>\n\n<script lang=\"ts\">\n\nimport Component from \"vue-class-component\";\nimport {Prop, Provide, Watch} from \"vue-property-decorator\";\nimport Vue from \"vue\";\nimport WasmNode from \"@/components/WasmNode.vue\";\nimport {ElementLayout} from \"@/code/ElementLayout\";\nimport TreeLayout from \"@/components/TreeLayout.vue\";\nimport Store from \"@/models/Store\";\n\n@Component({\n  components: {TreeLayout, WasmNode}\n})\nexport default class WasmAttribute extends Vue {\n  @Prop() attribute;\n\n  @Provide() nodeLayout = new ElementLayout(() => this.getRootNode(), node => Store.getChildren(node), WasmAttribute.getKey, horizontalMargin, verticalMargin);\n\n  name = null;\n  rootNode = null;\n  rootNodeId = null;\n\n  async mounted() {\n    this.name = this.attribute.getName();\n    if (this.attribute.constructor.name === 'EditableAttribute') {\n      this.rootNode = this.attribute.getRootNode();\n      (window as any).wasmModule.EmbindUtil.setSignalListener(this.attribute.getOnChangedSignal(), () => this.onRootNodeChanged());\n    }\n  }\n\n  private getRootNode() {\n    return this.rootNode;\n  }\n\n  private onRootNodeChanged() {\n    const rootNode = this.attribute.getRootNode();\n    this.rootNode = rootNode;\n    this.rootNodeId = rootNode.getId();\n    this.$nextTick(() => {\n      this.nodeLayout.recalculate();\n    });\n  }\n\n  static getKey(node) {\n    return node.getId();\n  }\n}\n\n</script>\n"]}]}