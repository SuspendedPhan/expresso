{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmOrganism.vue?vue&type=style&index=0&id=f0752674&scoped=true&lang=css","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmOrganism.vue","mtime":1714946187073},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/css-loader/dist/cjs.js","mtime":1714947270570},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1714947393592},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/postcss-loader/src/index.js","mtime":1714947268362},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5vcmdhbmlzbSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIC8qIG1hcmdpbi1ib3R0b206IDIwcHg7ICovCiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7CiAgcGFkZGluZy1sZWZ0OiAyMHB4OwogIHBhZGRpbmctcmlnaHQ6IDIwcHg7CiAgcGFkZGluZy10b3A6IDIwcHg7CiAgYm9yZGVyLXJhZGl1czogMnB4OwogIC8qIG1hcmdpbi10b3A6IDEwcHg7ICovCiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7Cn0KCi5jb250cm9scyB7CiAgZGlzcGxheTogZ3JpZDsKICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IG1heC1jb250ZW50IG1heC1jb250ZW50OwogIGdhcDogMTBweDsKICBtYXJnaW4tdG9wOiAxMHB4OwogIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0KCi5hdHRyaWJ1dGUtZ3JvdXAgewogIGRpc3BsYXk6IGdyaWQ7CiAgZ3JpZC1hdXRvLXJvd3M6IGF1dG87CiAgLyogZ2FwOiAxMHB4OyAqLwp9CgouZGl2aWRlciB7CiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4yKTsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIG1hcmdpbi10b3A6IDEwcHg7Cn0KCi5vcmdhbmlzbS1uYW1lIHsKICBjb2xvcjogIzRkYzQ3ZDsKICBmb250LXdlaWdodDogNTAwOwogIGZvbnQtc2l6ZTogMjRweDsKfQoKLnRpdGxlLWJhciB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Cn0KCi5idXR0b24gewogIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiL2ljb25zL3JlbW92ZS5zdmciKTsKICBiYWNrZ3JvdW5kLXNpemU6IDE2cHggMTZweDsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsKICB3aWR0aDogMjBweDsKICBoZWlnaHQ6IDIwcHg7CiAgYm9yZGVyOiBub25lOwp9Cg=="},{"version":3,"sources":["WasmOrganism.vue"],"names":[],"mappings":";AA+JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WasmOrganism.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div v-if=\"organism\" class=\"organism\" ref=\"organism\" :style=\"style\">\n    <div class=\"title-bar\">\n      <div class=\"organism-name\">\n        {{ name }}\n        <!--        ({{ getMetaname(organism) }})-->\n      </div>\n      <button\n          v-if=\"!isRoot\"\n          class=\"button\"\n          @click=\"removeOrganism(organism)\"\n      ></button>\n    </div>\n    <!--    <div class=\"controls\">-->\n    <!--      <select v-model=\"selectedPrimitiveId\">-->\n    <!--        <option-->\n    <!--            v-for=\"metaorganism in metaorganismCollection.getMetaorganisms()\"-->\n    <!--            :key=\"metaorganism.id\"-->\n    <!--            :value=\"metaorganism.id\"-->\n    <!--        >-->\n    <!--          {{ metaorganism.name }}-->\n    <!--        </option>-->\n    <!--      </select>-->\n    <!--      <button @click=\"spawn\">Spawn Suborganism</button>-->\n    <!--      <input placeholder=\"Attribute name\" v-model=\"attributeName\" />-->\n    <!--      <button @click=\"addAttribute\">Add Attribute</button>-->\n    <!--    </div>-->\n    <div class=\"attribute-group\">\n      <div\n          class=\"attribute\"\n          v-for=\"(attribute, index) in editableAttributes\"\n          :key=\"attribute.getId()\"\n      >\n        <div v-if=\"index !== 0\" class=\"divider\"></div>\n        <WasmAttribute :attribute=\"attribute\"/>\n      </div>\n    </div>\n    <WasmOrganism\n        class=\"organ\"\n        v-for=\"suborganism in suborganisms\"\n        :key=\"suborganism\"\n        :organism=\"suborganism\"\n        :isRoot=\"false\"\n        :organismLayout=\"organismLayout\"\n    >\n    </WasmOrganism>\n  </div>\n</template>\n\n<script lang='ts'>\nimport wu from \"wu\";\nimport Root from \"../store/Root\";\nimport WasmAttribute from \"./WasmAttribute.vue\";\nimport ResizeSensor from \"css-element-queries/src/ResizeSensor\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport {Prop} from \"vue-property-decorator\";\nimport {Primitive} from \"@/models/Type\";\nimport Functions from \"@/code/Functions\";\n\n@Component({components: {WasmAttribute: WasmAttribute}})\nexport default class WasmOrganism extends Vue {\n  @Prop() organism!: any;\n  @Prop() isRoot!: boolean;\n  @Prop() organismLayout;\n\n  attributeStore = Root.attributeStore;\n  metaorganismCollection = Root.metaorganismCollection;\n  selectedPrimitiveId = Root.metaorganismCollection.getMetaorganisms()[0].id;\n  attributeName = \"\";\n  editableAttributes = [] as any[];\n  position = {\n    top: 0,\n    left: 0,\n  };\n\n  name = \"\";\n  suborganisms = [];\n\n  mounted() {\n    if (this.organism == null) {\n      window.setTimeout(() => this.init(), 200);\n      return;\n    } else {\n      this.init();\n    }\n  }\n\n  destroyed() {\n    this.organismLayout.recalculate();\n  }\n\n  get style() {\n    return `left: ${this.position.left}px; top: ${this.position.top}px;`;\n  }\n\n  spawn() {\n    const metaorganism = this.metaorganismCollection.getFromId(\n        this.selectedPrimitiveId\n    );\n    // const organ = this.root.organismCollection.putFromMeta(\n    //     this.root.wordCollection.getRandomWord(),\n    //     metaorganism\n    // );\n    // this.root.organismCollection.addChild(this.organism, organ);\n    // this.root.save();\n  }\n\n  addAttribute() {\n    // const attributeName =\n    //     this.attributeName === \"\"\n    //         ? this.root.wordCollection.getRandomWord()\n    //         : this.attributeName;\n    // this.root.attributeCollection.putEditable(this.organism, attributeName, Primitive.Undetermined);\n    // this.root.save();\n  }\n\n  clearStorage() {\n    // this.root.clearStorage();\n  }\n\n  removeOrganism(organism) {\n    // this.root.organismCollection.remove(organism);\n    // this.root.save();\n  }\n\n  init() {\n    const element = this.$refs[\"organism\"] as any;\n    new ResizeSensor(element, () => {\n      this.organismLayout.recalculate();\n    });\n\n    this.organismLayout.registerElement(element, this.organism.getId());\n    this.organismLayout\n        .getLocalPositionObservable(this.organism.getId())\n        .subscribe((localPosition) => {\n          this.position.top = localPosition.top;\n          this.position.left = localPosition.left;\n        });\n\n    // Attribute.onAttributeCountChanged.sub(() => {\n    //   Vue.set(this, \"editableAttributes\", this.getEditableAttributes());\n    // });\n    // this.editableAttributes = this.getEditableAttributes();\n\n    this.name = this.organism.getName();\n    const attributes = Functions.vectorToArray(this.organism.getAttributes())\n        .filter(attribute => attribute.constructor.name === \"EditableAttribute\");\n    this.editableAttributes = attributes;\n  }\n\n  getMetaname(organism) {\n    return 'not implemented';\n    // return this.root.metaorganismCollection.getFromId(organism.metaorganismId).name;\n  }\n}\n</script>\n\n<style scoped>\n.organism {\n  position: absolute;\n  /* margin-bottom: 20px; */\n  border: 1px solid black;\n  padding-left: 20px;\n  padding-right: 20px;\n  padding-top: 20px;\n  border-radius: 2px;\n  /* margin-top: 10px; */\n  background-color: white;\n}\n\n.controls {\n  display: grid;\n  grid-template-columns: max-content max-content;\n  gap: 10px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n.attribute-group {\n  display: grid;\n  grid-auto-rows: auto;\n  /* gap: 10px; */\n}\n\n.divider {\n  border-bottom: 2px solid rgba(0, 0, 0, 0.2);\n  margin-bottom: 20px;\n  margin-top: 10px;\n}\n\n.organism-name {\n  color: #4dc47d;\n  font-weight: 500;\n  font-size: 24px;\n}\n\n.title-bar {\n  display: flex;\n  justify-content: space-between;\n}\n\n.button {\n  background-image: url(\"/icons/remove.svg\");\n  background-size: 16px 16px;\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 20px;\n  height: 20px;\n  border: none;\n}\n</style>\n"]}]}