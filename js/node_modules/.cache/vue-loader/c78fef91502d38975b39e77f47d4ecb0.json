{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmExpressor.vue?vue&type=style&index=0&id=bb6ca8e2&scoped=true&lang=css","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmExpressor.vue","mtime":1714946187072},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/css-loader/dist/cjs.js","mtime":1714947270570},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1714947393592},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/postcss-loader/src/index.js","mtime":1714947268362},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5leHByZXNzb3IgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBvdXRsaW5lOiBub25lOwp9Ci5vcmdhbmlzbSB7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQouYXR0cmlidXRlIHsKfQouY29udHJvbHMgewogIGRpc3BsYXk6IGdyaWQ7CiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBtYXgtY29udGVudCBtYXgtY29udGVudCBtYXgtY29udGVudDsKICBnYXA6IDEwcHg7Cn0KLmJvdHRvbS1ncm91cCB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Cn0KLmVycm9yLWJveCB7CiAgcGFkZGluZzogNXB4OwogIGZvbnQtc2l6ZTogMTJweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiBoc2woMCwgMTAwJSwgNjclKTsKICB2aXNpYmlsaXR5OiBoaWRkZW47CiAgY29sb3I6IHdoaXRlOwp9Ci5lcnJvci1ib3guZXJyb3IgewogIHZpc2liaWxpdHk6IHZpc2libGU7Cn0KLmNhbnZhcyB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICB0b3A6IDBweDsKICBsZWZ0OiAwcHg7CiAgYm9yZGVyOiBub25lOwp9Ci5jbGVhclN0b3JhZ2UgewogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDEwcHg7CiAgbGVmdDogMjAwcHg7CiAgei1pbmRleDogMjsKfQo="},{"version":3,"sources":["WasmExpressor.vue"],"names":[],"mappings":";AAqIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WasmExpressor.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"expressor\" ref=\"expressor\">\n    <div>\n      <canvas\n          ref=\"canvas\"\n          type=\"2d\"\n          :width=\"canvasWidth\"\n          :height=\"canvasHeight\"\n          class=\"canvas\"\n      ></canvas>\n    </div>\n    <div ref=\"panzoom\">\n      <WasmOrganism v-if=\"rootOrganism\" :organism=\"rootOrganism\" :organismLayout=\"organismLayout\" :isRoot=\"true\"></WasmOrganism>\n      <!--      <div class=\"bottom-group\">-->\n<!--        <button @click=\"clearStorage\" class=\"clearStorage\">-->\n<!--          Clear storage-->\n<!--        </button>-->\n<!--        <div :class=\"['error-box', { error: consoleError }]\">-->\n<!--          you have console errors-->\n<!--        </div>-->\n<!--      </div>-->\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n\nimport Component from \"vue-class-component\";\nimport {Prop, Provide} from \"vue-property-decorator\";\nimport Vue from \"vue\";\nimport WasmOrganism from \"@/components/WasmOrganism.vue\";\nimport {ElementLayout} from \"@/code/ElementLayout\";\nimport Functions from \"@/code/Functions\";\n\nimport panzoom from \"panzoom\";\nimport ResizeSensor from \"css-element-queries/src/ResizeSensor\";\nimport WasmPen from \"@/code/WasmPen\";\n\n@Component({\n  components: {WasmOrganism}\n})\nexport default class WasmExpressor extends Vue {\n  @Prop()\n  project;\n\n  rootOrganism = null;\n  organismLayout = null as any;\n\n  consoleError = false;\n  canvasWidth = 0;\n  canvasHeight = 0;\n  panzoomTransform = {};\n  lines = [];\n\n  async mounted() {\n    this.rootOrganism = this.project.getRootOrganism();\n    this.organismLayout = new ElementLayout(() => this.rootOrganism, WasmExpressor.getChildren, WasmExpressor.getKey, horizontalMargin, verticalMargin);\n    this.oldMounted();\n  }\n\n  private static getChildren(organism) {\n    return Functions.vectorToArray(organism.getSuborganisms());\n  }\n\n  private static getKey(organism) {\n    return organism.getId();\n  }\n\n  // --- old stuff ---\n\n  oldMounted() {\n    const pz = panzoom(this.$refs[\"panzoom\"] as any, {\n      beforeMouseDown: function (e) {\n        var shouldIgnore = !e.altKey;\n        return shouldIgnore;\n      },\n      filterKey: function (/* e, dx, dy, dz */) {\n        // don't let panzoom handle this event:\n        return true;\n      },\n      zoomDoubleClickSpeed: 1,\n    });\n    pz.on(\"transform\", (e) => {\n      this.panzoomTransform = pz.getTransform();\n      this.drawLines();\n    });\n\n    // NOTE: maybe can remove?\n    const expressorElement = this.$refs[\"expressor\"] as any;\n    this.canvasWidth = expressorElement.clientWidth;\n    this.canvasHeight = expressorElement.clientHeight;\n\n    new ResizeSensor(expressorElement as any, () => {\n      this.canvasWidth = expressorElement.clientWidth;\n      this.canvasHeight = expressorElement.clientHeight;\n    });\n\n    this.organismLayout.onCalculated.subscribe((output) => {\n      this.lines = output.lines;\n      this.drawLines();\n    });\n  }\n\n  // clearStorage() {\n  //   this.root.clearStorage();\n  // }\n\n  drawLines() {\n    const canvasElement = this.$refs[\"canvas\"] as any;\n    const context = canvasElement.getContext(\"2d\");\n    context.resetTransform();\n    context.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n    const transform = this.panzoomTransform as any;\n    context.setTransform(\n        transform.scale,\n        0,\n        0,\n        transform.scale,\n        transform.x,\n        transform.y\n    );\n    context.strokeStyle = \"gray\";\n    for (const line of this.lines as any) {\n      context.beginPath();\n      context.moveTo(line.startX, line.startY);\n      context.lineTo(line.endX, line.endY);\n      context.stroke();\n    }\n  }\n}\n\n</script>\n<style scoped>\n.expressor {\n  position: relative;\n  outline: none;\n}\n.organism {\n  margin-bottom: 20px;\n}\n.attribute {\n}\n.controls {\n  display: grid;\n  grid-template-columns: max-content max-content max-content;\n  gap: 10px;\n}\n.bottom-group {\n  display: flex;\n  justify-content: space-between;\n}\n.error-box {\n  padding: 5px;\n  font-size: 12px;\n  background-color: hsl(0, 100%, 67%);\n  visibility: hidden;\n  color: white;\n}\n.error-box.error {\n  visibility: visible;\n}\n.canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0px;\n  left: 0px;\n  border: none;\n}\n.clearStorage {\n  position: fixed;\n  top: 10px;\n  left: 200px;\n  z-index: 2;\n}\n</style>"]}]}