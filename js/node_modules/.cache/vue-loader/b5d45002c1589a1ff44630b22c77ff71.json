{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/Node.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/Node.vue","mtime":1714946187071},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js","mtime":1714947394795},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IFBlblBvc2l0aW9uUmVsYXRpb24gfSBmcm9tICJAL3N0b3JlL1BlbiI7CmltcG9ydCBSb290IGZyb20gIi4uL3N0b3JlL1Jvb3QiOwppbXBvcnQgTm9kZVBpY2tlciBmcm9tICIuL05vZGVQaWNrZXIiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJOb2RlIiwKICBjb21wb25lbnRzOiB7CiAgfSwKICBwcm9wczogewogICAgYXN0Tm9kZTogeyB2YWx1ZTogMCB9LAogIH0sCiAgZGF0YTogKCkgPT4gewogICAgcmV0dXJuIHsKICAgICAgUm9vdDogUm9vdCwKICAgICAgbm9kZVN0b3JlOiBSb290Lm5vZGVTdG9yZSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaGlnaGxpZ2h0ZWQoKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgUm9vdC5wZW5TdG9yZS5nZXRQZW5Qb3NpdGlvbigpLnBvc2l0aW9uVHlwZSA9PT0gIk5vZGUiICYmCiAgICAgICAgUm9vdC5wZW5TdG9yZS5nZXRQZW5Qb3NpdGlvbigpLnJlZmVyZW5jZU5vZGVJZCA9PT0gdGhpcy5hc3ROb2RlLmlkICYmCiAgICAgICAgUm9vdC5wZW5TdG9yZS5nZXRQZW5Qb3NpdGlvbigpLnJlbGF0aW9uID09PSBQZW5Qb3NpdGlvblJlbGF0aW9uLk9uCiAgICAgICk7CiAgICB9LAogICAgaXNQZW5CZWZvcmVNZSgpIHsKICAgICAgcmV0dXJuICgKICAgICAgICBSb290LnBlblN0b3JlLmdldFBlblBvc2l0aW9uKCkucG9zaXRpb25UeXBlID09PSAiTm9kZSIgJiYKICAgICAgICBSb290LnBlblN0b3JlLmdldFBlblBvc2l0aW9uKCkucmVmZXJlbmNlTm9kZUlkID09PSB0aGlzLmFzdE5vZGUuaWQgJiYKICAgICAgICBSb290LnBlblN0b3JlLmdldFBlblBvc2l0aW9uKCkucmVsYXRpb24gPT09IFBlblBvc2l0aW9uUmVsYXRpb24uQmVmb3JlCiAgICAgICk7CiAgICB9LAogICAgaXNQZW5BZnRlck1lKCkgewogICAgICByZXR1cm4gKAogICAgICAgIFJvb3QucGVuU3RvcmUuZ2V0UGVuUG9zaXRpb24oKS5wb3NpdGlvblR5cGUgPT09ICJOb2RlIiAmJgogICAgICAgIFJvb3QucGVuU3RvcmUuZ2V0UGVuUG9zaXRpb24oKS5yZWZlcmVuY2VOb2RlSWQgPT09IHRoaXMuYXN0Tm9kZS5pZCAmJgogICAgICAgIFJvb3QucGVuU3RvcmUuZ2V0UGVuUG9zaXRpb24oKS5yZWxhdGlvbiA9PT0gUGVuUG9zaXRpb25SZWxhdGlvbi5BZnRlcgogICAgICApOwogICAgfSwKICAgIHBpY2tpbmcoKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgUm9vdC5wZW4uZ2V0UGVuUG9zaXRpb24oKS5yZWZlcmVuY2VOb2RlSWQgPT09IHRoaXMuYXN0Tm9kZS5pZCAmJgogICAgICAgIFJvb3QucGVuU3RvcmUuZ2V0SXNRdWVyeWluZygpCiAgICAgICk7CiAgICB9LAogICAgYXN0Tm9kZUNoaWxkcmVuKCkgewogICAgICBSb290Lm5vZGVDb2xsZWN0aW9uLm5vZGVQYXJlbnRzLmxlbmd0aDsgLy8gdHJpZ2dlciByZWFjdGl2ZQogICAgICByZXR1cm4gUm9vdC5ub2RlU3RvcmUuZ2V0Q2hpbGRyZW4odGhpcy5hc3ROb2RlKS50b0FycmF5KCk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgY2xpY2soKSB7CiAgICAgIFJvb3QucGVuU3RvcmUuc2V0UG9pbnRlZE5vZGUodGhpcy5hc3ROb2RlKTsKICAgIH0sCiAgICBibHVyKCkgewogICAgICAvLyBBY3Rpb25zLmJsdXJDdXJzb3IoKTsKICAgIH0sCiAgICByZWZlcmVuY2VUb1N0cmluZyhyZWZlcmVuY2VOb2RlKSB7CiAgICAgIGNvbnN0IHRhcmdldE5vZGUgPSBSb290Lm5vZGVTdG9yZS5nZXRUYXJnZXROb2RlRm9yUmVmZXJlbmNlKAogICAgICAgIHJlZmVyZW5jZU5vZGUKICAgICAgKTsKICAgICAgcmV0dXJuIFJvb3QuYXR0cmlidXRlU3RvcmUuZ2V0QXR0cmlidXRlRm9yTm9kZSh0YXJnZXROb2RlKS5uYW1lOwogICAgfSwKICAgIGZ1blRvU3RyaW5nKGZ1bk5vZGUpIHsKICAgICAgY29uc3QgbWV0YWZ1biA9IFJvb3QubWV0YWZ1blN0b3JlLmdldEZyb21OYW1lKGZ1bk5vZGUubWV0YWZ1bk5hbWUpOwogICAgICByZXR1cm4gbWV0YWZ1bi5uYW1lOwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBwaWNraW5nKCkgewogICAgICAvLyBpZiAodGhpcy5waWNraW5nKSB7CiAgICAgIC8vICAgdGhpcy4kbmV4dFRpY2soKS50aGVuKCgpID0+IHsKICAgICAgLy8gICAgIHRoaXMuJHJlZnNbInNlYXJjaGVyIl0uZm9jdXMoKTsKICAgICAgLy8gICB9KTsKICAgICAgLy8gfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Node.vue"],"names":[],"mappings":";AA2CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Node.vue","sourceRoot":"src/components","sourcesContent":["w<template>\n  <span class=\"node-root\">\n    <span v-if=\"isPenBeforeMe\"><b>|</b></span>\n    <span\n      v-if=\"astNode.value != null\"\n      @click=\"click\"\n      :class=\"{ highlighted }\"\n      >{{ astNode.value }}</span\n    >\n    <span\n      v-else-if=\"astNode.metaname === 'Reference'\"\n      @click=\"click\"\n      :class=\"{ highlighted }\"\n      >{{ referenceToString(astNode) }}</span\n    >\n    <span v-else-if=\"astNode.metaname === 'Vector'\">\n      <span :class=\"{ highlighted }\" @click=\"click\">&lt;</span>\n      <Node :astNode=\"astNodeChildren[0]\" />,\n      <Node :astNode=\"astNodeChildren[1]\" />\n      <span :class=\"{ highlighted }\" @click=\"click\">&gt;</span>\n    </span>\n    <span v-else>\n      <span @click=\"click\" :class=\"['function', { highlighted }]\"\n        >{{ funToString(astNode) }}(</span\n      >\n      <span v-for=\"(child, index) in astNodeChildren\" :key=\"child.id\">\n        <Node :astNode=\"child\" />\n        <span v-if=\"index !== astNodeChildren.length - 1\">, </span>\n      </span>\n      <span :class=\"{ highlighted }\">)</span>\n    </span>\n    <span v-if=\"isPenAfterMe\"><b>|</b></span>\n    <!-- <NodePicker\n      ref=\"searcher\"\n      v-if=\"picking\"\n      :nodeToReplace=\"astNode\"\n      @blur=\"blur\"\n      :class=\"['searcher', { 'bring-to-front': picking }]\"\n    /> -->\n  </span>\n</template>\n\n<script>\nimport { PenPositionRelation } from \"@/store/Pen\";\nimport Root from \"../store/Root\";\nimport NodePicker from \"./NodePicker\";\n\nexport default {\n  name: \"Node\",\n  components: {\n  },\n  props: {\n    astNode: { value: 0 },\n  },\n  data: () => {\n    return {\n      Root: Root,\n      nodeStore: Root.nodeStore,\n    };\n  },\n  computed: {\n    highlighted() {\n      return (\n        Root.penStore.getPenPosition().positionType === \"Node\" &&\n        Root.penStore.getPenPosition().referenceNodeId === this.astNode.id &&\n        Root.penStore.getPenPosition().relation === PenPositionRelation.On\n      );\n    },\n    isPenBeforeMe() {\n      return (\n        Root.penStore.getPenPosition().positionType === \"Node\" &&\n        Root.penStore.getPenPosition().referenceNodeId === this.astNode.id &&\n        Root.penStore.getPenPosition().relation === PenPositionRelation.Before\n      );\n    },\n    isPenAfterMe() {\n      return (\n        Root.penStore.getPenPosition().positionType === \"Node\" &&\n        Root.penStore.getPenPosition().referenceNodeId === this.astNode.id &&\n        Root.penStore.getPenPosition().relation === PenPositionRelation.After\n      );\n    },\n    picking() {\n      return (\n        Root.pen.getPenPosition().referenceNodeId === this.astNode.id &&\n        Root.penStore.getIsQuerying()\n      );\n    },\n    astNodeChildren() {\n      Root.nodeCollection.nodeParents.length; // trigger reactive\n      return Root.nodeStore.getChildren(this.astNode).toArray();\n    },\n  },\n  methods: {\n    click() {\n      Root.penStore.setPointedNode(this.astNode);\n    },\n    blur() {\n      // Actions.blurCursor();\n    },\n    referenceToString(referenceNode) {\n      const targetNode = Root.nodeStore.getTargetNodeForReference(\n        referenceNode\n      );\n      return Root.attributeStore.getAttributeForNode(targetNode).name;\n    },\n    funToString(funNode) {\n      const metafun = Root.metafunStore.getFromName(funNode.metafunName);\n      return metafun.name;\n    },\n  },\n  watch: {\n    picking() {\n      // if (this.picking) {\n      //   this.$nextTick().then(() => {\n      //     this.$refs[\"searcher\"].focus();\n      //   });\n      // }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.searcher {\n  position: absolute;\n  top: 100%;\n}\n.node-root {\n  position: relative;\n}\n.function {\n  text-transform: lowercase;\n}\n.highlighted {\n  font-weight: bold;\n}\n.bring-to-front {\n  z-index: 1;\n}\n</style>\n"]}]}