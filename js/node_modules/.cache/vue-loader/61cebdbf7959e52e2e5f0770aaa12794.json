{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/GoTest.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/GoTest.vue","mtime":1714946187070},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js","mtime":1714947394795},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/ts-loader/index.js","mtime":1714947267504},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBHb01vZHVsZVdhc20gZnJvbSAiLi4vLi4vcHVibGljL215bW9kdWxlLndhc20iOwppbXBvcnQge2NvbXB1dGVkLCBvbk1vdW50ZWQsIG9uVW5tb3VudGVkLCByZWYsIHdhdGNoLCByZWFkb25seSwgbmV4dFRpY2t9IGZyb20gIkB2dWUvY29tcG9zaXRpb24tYXBpIjsKaW1wb3J0IEdvRXhwcmVzc29yIGZyb20gIkAvY29tcG9uZW50cy9Hb0V4cHJlc3Nvci52dWUiOwppbXBvcnQgUGl4aVJlbmRlcmVyIGZyb20gIkAvY29kZS9QaXhpUmVuZGVyZXIiOwppbXBvcnQgZnBzIGZyb20gImZwcyI7CmltcG9ydCBudW1lcmFsIGZyb20gIm51bWVyYWwiOwppbXBvcnQgeyBFbGVtZW50TGF5b3V0IH0gZnJvbSAnQC9jb2RlL0VsZW1lbnRMYXlvdXQnOwppbXBvcnQge1Jlc2l6ZVNlbnNvcn0gZnJvbSAiY3NzLWVsZW1lbnQtcXVlcmllcyI7CgovLyBEZWZpbmVkIGluIHB1YmxpYy93YXNtX2V4ZWMuanMsIHdoaWNoIGlzIGxvYWRlZCBpbiBpbmRleC5odG1sCmRlY2xhcmUgdmFyIEdvOiBhbnk7CgovLyBEZWZpbmVkIGluIGdvX21vZHVsZS5nbywgYXZhaWxhYmxlIGFmdGVyIGdvLnJ1bihyZXN1bHQuaW5zdGFuY2UpCmRlY2xhcmUgdmFyIEdvTW9kdWxlOiBhbnk7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkdvVGVzdCIsCiAgY29tcG9uZW50czoge0dvRXhwcmVzc29yfSwKICBzZXR1cCgpIHsKICAgIGNvbnN0IGdvID0gbmV3IEdvKCk7CiAgICBjb25zdCBzZXR1cEV4cHJlc3NvciA9IHJlZjxhbnk+KG51bGwpOwogICAgY29uc3Qgdmlld3BvcnQgPSByZWYobnVsbCk7CiAgICBjb25zdCBjYW52YXMgPSByZWYobnVsbCk7CgogICAgLy8gR29Nb2R1bGVXYXNtIGlzIHRoZSBwYXRoIHRvIHRoZSBteW1vZHVsZS53YXNtIGZpbGUKICAgIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKGZldGNoKEdvTW9kdWxlV2FzbSksIGdvLmltcG9ydE9iamVjdCkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgIGdvLnJ1bihyZXN1bHQuaW5zdGFuY2UpOwoKICAgICAgc2V0dXBFeHByZXNzb3IudmFsdWUgPSAoKSA9PiBHb01vZHVsZS5zZXR1cEV4cHJlc3NvcihyZWYsIHdhdGNoLCBjb21wdXRlZCwgcmVhZG9ubHksIG9uVW5tb3VudGVkLCBuZXh0VGljaywgRWxlbWVudExheW91dCwgUmVzaXplU2Vuc29yKTsKICAgICAgY29uc3QgcmVuZGVyZXIgPSBuZXcgUGl4aVJlbmRlcmVyKHZpZXdwb3J0LnZhbHVlLCBjYW52YXMudmFsdWUpOwogICAgICBjb25zdCBvbkZyYW1lID0gKCkgPT4gewogICAgICAgIHRpY2tlci50aWNrKCk7CiAgICAgICAgR29Nb2R1bGUuZXZhbChyZW5kZXJlci5jaXJjbGVQb29sLCByZW5kZXJlci5jaXJjbGVzKTsKICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKG9uRnJhbWUpOwogICAgICB9OwogICAgICBvbkZyYW1lKCk7CiAgICB9KTsKCiAgICBjb25zdCBmcmFtZXNQZXJTZWNvbmQgPSByZWYoIjAwIik7CiAgICBjb25zdCB0aWNrZXIgPSBmcHMoeyBldmVyeTogMTAgfSk7CiAgICB0aWNrZXIub24oImRhdGEiLCAoZnJhbWVyYXRlKSA9PiAoZnJhbWVzUGVyU2Vjb25kLnZhbHVlID0gbnVtZXJhbChmcmFtZXJhdGUpLmZvcm1hdCgiMCIpKSk7CgogICAgcmV0dXJuIHtzZXR1cEV4cHJlc3Nvciwgdmlld3BvcnQsIGNhbnZhcywgZnJhbWVzUGVyU2Vjb25kfTsKICB9Cn0K"},{"version":3,"sources":["GoTest.vue"],"names":[],"mappings":";AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"GoTest.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"flex\">\n      <div class=\"w-1/2 h-full\">\n        <GoExpressor v-if=\"setupExpressor !== null\" :setupFunc=\"setupExpressor\"/>\n      </div>\n      <div ref=\"viewport\" class=\"h-full w-1/2\">\n        <canvas ref=\"canvas\"></canvas>\n      </div>\n      <div class=\"fixed top-0 right-0 text-white\">{{framesPerSecond}}</div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport GoModuleWasm from \"../../public/mymodule.wasm\";\nimport {computed, onMounted, onUnmounted, ref, watch, readonly, nextTick} from \"@vue/composition-api\";\nimport GoExpressor from \"@/components/GoExpressor.vue\";\nimport PixiRenderer from \"@/code/PixiRenderer\";\nimport fps from \"fps\";\nimport numeral from \"numeral\";\nimport { ElementLayout } from '@/code/ElementLayout';\nimport {ResizeSensor} from \"css-element-queries\";\n\n// Defined in public/wasm_exec.js, which is loaded in index.html\ndeclare var Go: any;\n\n// Defined in go_module.go, available after go.run(result.instance)\ndeclare var GoModule: any;\n\nexport default {\n  name: \"GoTest\",\n  components: {GoExpressor},\n  setup() {\n    const go = new Go();\n    const setupExpressor = ref<any>(null);\n    const viewport = ref(null);\n    const canvas = ref(null);\n\n    // GoModuleWasm is the path to the mymodule.wasm file\n    WebAssembly.instantiateStreaming(fetch(GoModuleWasm), go.importObject).then((result) => {\n      go.run(result.instance);\n\n      setupExpressor.value = () => GoModule.setupExpressor(ref, watch, computed, readonly, onUnmounted, nextTick, ElementLayout, ResizeSensor);\n      const renderer = new PixiRenderer(viewport.value, canvas.value);\n      const onFrame = () => {\n        ticker.tick();\n        GoModule.eval(renderer.circlePool, renderer.circles);\n        window.requestAnimationFrame(onFrame);\n      };\n      onFrame();\n    });\n\n    const framesPerSecond = ref(\"00\");\n    const ticker = fps({ every: 10 });\n    ticker.on(\"data\", (framerate) => (framesPerSecond.value = numeral(framerate).format(\"0\")));\n\n    return {setupExpressor, viewport, canvas, framesPerSecond};\n  }\n}\n</script>\n\n<style scoped>\n</style>"]}]}