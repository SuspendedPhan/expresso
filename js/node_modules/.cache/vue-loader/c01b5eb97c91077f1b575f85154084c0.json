{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/ProjectFunction.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/ProjectFunction.vue","mtime":1714946187071},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js","mtime":1714947394795},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/ts-loader/index.js","mtime":1714947267504},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBXYXNtTm9kZSBmcm9tICJAL2NvbXBvbmVudHMvV2FzbU5vZGUudnVlIgppbXBvcnQge2luamVjdCwgbmV4dFRpY2ssIHByb3ZpZGUsIHJlZn0gZnJvbSAiQHZ1ZS9jb21wb3NpdGlvbi1hcGkiOwppbXBvcnQge0VsZW1lbnRMYXlvdXR9IGZyb20gIkAvY29kZS9FbGVtZW50TGF5b3V0IjsKaW1wb3J0IFN0b3JlIGZyb20gIkAvbW9kZWxzL1N0b3JlIjsKaW1wb3J0IFRyZWVMYXlvdXQgZnJvbSAiQC9jb21wb25lbnRzL1RyZWVMYXlvdXQudnVlIjsKaW1wb3J0IFByb2plY3RGdW5jdGlvblBhcmFtZXRlciBmcm9tICJAL2NvbXBvbmVudHMvUHJvamVjdEZ1bmN0aW9uUGFyYW1ldGVyLnZ1ZSI7CmltcG9ydCBGdW5jdGlvbnMgZnJvbSAiQC9jb2RlL0Z1bmN0aW9ucyI7CmltcG9ydCBBZGRGb3JtIGZyb20gIkAvY29tcG9uZW50cy9BZGRGb3JtLnZ1ZSI7CmltcG9ydCBXb3JkQ29sbGVjdGlvbiBmcm9tICJAL3N0b3JlL1dvcmRDb2xsZWN0aW9uIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUHJvamVjdEZ1bmN0aW9uJywKICBjb21wb25lbnRzOiB7QWRkRm9ybSwgUHJvamVjdEZ1bmN0aW9uUGFyYW1ldGVyLCBUcmVlTGF5b3V0LCBXYXNtTm9kZX0sCiAgcHJvcHM6IHsKICAgIGZ1bjoge30KICB9LAogIHNldHVwKHByb3BzKSB7CiAgICBjb25zdCBlbU1vZHVsZSA9IGluamVjdDxhbnk+KCdnZXRFbU1vZHVsZScpKCk7CiAgICBjb25zdCBlbGVtZW50TGF5b3V0ID0gbmV3IEVsZW1lbnRMYXlvdXQoKCkgPT4gcHJvcHMuZnVuLmdldFJvb3ROb2RlKCksIG5vZGUgPT4gU3RvcmUuZ2V0Q2hpbGRyZW4obm9kZSksIChub2RlKSA9PiBub2RlLmdldElkKCksIGhvcml6b250YWxNYXJnaW4sIHZlcnRpY2FsTWFyZ2luKTsKCiAgICBjb25zdCBnZXRQYXJhbWV0ZXJzID0gKCkgPT4gRnVuY3Rpb25zLnZlY3RvclRvQXJyYXkocHJvcHMuZnVuLmdldFBhcmFtZXRlcnMoKSk7CiAgICBjb25zdCBwYXJhbWV0ZXJzID0gcmVmKGdldFBhcmFtZXRlcnMoKSk7CiAgICBjb25zdCBub2RlID0gcmVmKHByb3BzLmZ1bi5nZXRSb290Tm9kZSgpKTsKICAgIGNvbnN0IG5vZGVJZCA9IHJlZihub2RlLnZhbHVlLmdldElkKCkpOwogICAgZW1Nb2R1bGUuRW1iaW5kVXRpbC5zZXRTaWduYWxMaXN0ZW5lcihwcm9wcy5mdW4uZ2V0T25DaGFuZ2VkU2lnbmFsKCksICgpID0+IHsKICAgICAgcGFyYW1ldGVycy52YWx1ZSA9IGdldFBhcmFtZXRlcnMoKTsKICAgICAgbm9kZS52YWx1ZSA9IHByb3BzLmZ1bi5nZXRSb290Tm9kZSgpOwogICAgICBub2RlSWQudmFsdWUgPSBub2RlLnZhbHVlLmdldElkKCk7CiAgICAgIG5leHRUaWNrKCgpID0+IHsKICAgICAgICBlbGVtZW50TGF5b3V0LnJlY2FsY3VsYXRlKCk7CiAgICAgIH0pOwogICAgfSk7CgogICAgcHJvdmlkZSgnbm9kZUxheW91dCcsIGVsZW1lbnRMYXlvdXQpOwoKICAgIGZ1bmN0aW9uIGFkZFBhcmFtZXRlcihuYW1lKSB7CiAgICAgIGNvbnN0IHBhcmFtZXRlck5hbWUgPSBXb3JkQ29sbGVjdGlvbi50b1JhbmRvbVdvcmRJZkVtcHR5KG5hbWUpOwogICAgICBjb25zdCBwYXJhbWV0ZXIgPSBlbU1vZHVsZS5GdW5jdGlvblBhcmFtZXRlci5tYWtlVW5pcXVlKHBhcmFtZXRlck5hbWUpOwogICAgICBwcm9wcy5mdW4uYWRkUGFyYW1ldGVyKHBhcmFtZXRlcik7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgZWxlbWVudExheW91dCwKICAgICAgcGFyYW1ldGVycywKICAgICAgYWRkUGFyYW1ldGVyLAogICAgICBub2RlLAogICAgICBub2RlSWQKICAgIH07CiAgfQp9Cg=="},{"version":3,"sources":["ProjectFunction.vue"],"names":[],"mappings":";AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProjectFunction.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div>{{ fun.getName() }}</div>\n    <div v-for=\"parameter in parameters\" :key=\"parameter.getId()\">\n      <ProjectFunctionParameter :parameter=\"parameter\"/>\n    </div>\n    <AddForm button-label=\"Add Parameter\" @submit=\"addParameter\" />\n    <TreeLayout :elementLayout=\"elementLayout\" class=\"mt-4\">\n      <WasmNode :node=\"node\" :key=\"nodeId\" />\n    </TreeLayout>\n  </div>\n</template>\n<script lang=\"ts\">\nimport WasmNode from \"@/components/WasmNode.vue\"\nimport {inject, nextTick, provide, ref} from \"@vue/composition-api\";\nimport {ElementLayout} from \"@/code/ElementLayout\";\nimport Store from \"@/models/Store\";\nimport TreeLayout from \"@/components/TreeLayout.vue\";\nimport ProjectFunctionParameter from \"@/components/ProjectFunctionParameter.vue\";\nimport Functions from \"@/code/Functions\";\nimport AddForm from \"@/components/AddForm.vue\";\nimport WordCollection from \"@/store/WordCollection\";\n\nexport default {\n  name: 'ProjectFunction',\n  components: {AddForm, ProjectFunctionParameter, TreeLayout, WasmNode},\n  props: {\n    fun: {}\n  },\n  setup(props) {\n    const emModule = inject<any>('getEmModule')();\n    const elementLayout = new ElementLayout(() => props.fun.getRootNode(), node => Store.getChildren(node), (node) => node.getId(), horizontalMargin, verticalMargin);\n\n    const getParameters = () => Functions.vectorToArray(props.fun.getParameters());\n    const parameters = ref(getParameters());\n    const node = ref(props.fun.getRootNode());\n    const nodeId = ref(node.value.getId());\n    emModule.EmbindUtil.setSignalListener(props.fun.getOnChangedSignal(), () => {\n      parameters.value = getParameters();\n      node.value = props.fun.getRootNode();\n      nodeId.value = node.value.getId();\n      nextTick(() => {\n        elementLayout.recalculate();\n      });\n    });\n\n    provide('nodeLayout', elementLayout);\n\n    function addParameter(name) {\n      const parameterName = WordCollection.toRandomWordIfEmpty(name);\n      const parameter = emModule.FunctionParameter.makeUnique(parameterName);\n      props.fun.addParameter(parameter);\n    }\n\n    return {\n      elementLayout,\n      parameters,\n      addParameter,\n      node,\n      nodeId\n    };\n  }\n}\n</script>"]}]}