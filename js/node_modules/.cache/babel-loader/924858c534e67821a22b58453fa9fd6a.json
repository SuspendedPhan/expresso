{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/Node.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/Node.vue","mtime":1714946187071},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/babel.config.js","mtime":1714946187052},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js","mtime":1714947394795},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgUGVuUG9zaXRpb25SZWxhdGlvbiB9IGZyb20gIkAvc3RvcmUvUGVuIjsKaW1wb3J0IFJvb3QgZnJvbSAiLi4vc3RvcmUvUm9vdCI7CmltcG9ydCBOb2RlUGlja2VyIGZyb20gIi4vTm9kZVBpY2tlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTm9kZSIsCiAgY29tcG9uZW50czoge30sCiAgcHJvcHM6IHsKICAgIGFzdE5vZGU6IHsKICAgICAgdmFsdWU6IDAKICAgIH0KICB9LAogIGRhdGE6ICgpID0+IHsKICAgIHJldHVybiB7CiAgICAgIFJvb3Q6IFJvb3QsCiAgICAgIG5vZGVTdG9yZTogUm9vdC5ub2RlU3RvcmUKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaGlnaGxpZ2h0ZWQoKSB7CiAgICAgIHJldHVybiBSb290LnBlblN0b3JlLmdldFBlblBvc2l0aW9uKCkucG9zaXRpb25UeXBlID09PSAiTm9kZSIgJiYgUm9vdC5wZW5TdG9yZS5nZXRQZW5Qb3NpdGlvbigpLnJlZmVyZW5jZU5vZGVJZCA9PT0gdGhpcy5hc3ROb2RlLmlkICYmIFJvb3QucGVuU3RvcmUuZ2V0UGVuUG9zaXRpb24oKS5yZWxhdGlvbiA9PT0gUGVuUG9zaXRpb25SZWxhdGlvbi5PbjsKICAgIH0sCiAgICBpc1BlbkJlZm9yZU1lKCkgewogICAgICByZXR1cm4gUm9vdC5wZW5TdG9yZS5nZXRQZW5Qb3NpdGlvbigpLnBvc2l0aW9uVHlwZSA9PT0gIk5vZGUiICYmIFJvb3QucGVuU3RvcmUuZ2V0UGVuUG9zaXRpb24oKS5yZWZlcmVuY2VOb2RlSWQgPT09IHRoaXMuYXN0Tm9kZS5pZCAmJiBSb290LnBlblN0b3JlLmdldFBlblBvc2l0aW9uKCkucmVsYXRpb24gPT09IFBlblBvc2l0aW9uUmVsYXRpb24uQmVmb3JlOwogICAgfSwKICAgIGlzUGVuQWZ0ZXJNZSgpIHsKICAgICAgcmV0dXJuIFJvb3QucGVuU3RvcmUuZ2V0UGVuUG9zaXRpb24oKS5wb3NpdGlvblR5cGUgPT09ICJOb2RlIiAmJiBSb290LnBlblN0b3JlLmdldFBlblBvc2l0aW9uKCkucmVmZXJlbmNlTm9kZUlkID09PSB0aGlzLmFzdE5vZGUuaWQgJiYgUm9vdC5wZW5TdG9yZS5nZXRQZW5Qb3NpdGlvbigpLnJlbGF0aW9uID09PSBQZW5Qb3NpdGlvblJlbGF0aW9uLkFmdGVyOwogICAgfSwKICAgIHBpY2tpbmcoKSB7CiAgICAgIHJldHVybiBSb290LnBlbi5nZXRQZW5Qb3NpdGlvbigpLnJlZmVyZW5jZU5vZGVJZCA9PT0gdGhpcy5hc3ROb2RlLmlkICYmIFJvb3QucGVuU3RvcmUuZ2V0SXNRdWVyeWluZygpOwogICAgfSwKICAgIGFzdE5vZGVDaGlsZHJlbigpIHsKICAgICAgUm9vdC5ub2RlQ29sbGVjdGlvbi5ub2RlUGFyZW50cy5sZW5ndGg7IC8vIHRyaWdnZXIgcmVhY3RpdmUKICAgICAgcmV0dXJuIFJvb3Qubm9kZVN0b3JlLmdldENoaWxkcmVuKHRoaXMuYXN0Tm9kZSkudG9BcnJheSgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY2xpY2soKSB7CiAgICAgIFJvb3QucGVuU3RvcmUuc2V0UG9pbnRlZE5vZGUodGhpcy5hc3ROb2RlKTsKICAgIH0sCiAgICBibHVyKCkgewogICAgICAvLyBBY3Rpb25zLmJsdXJDdXJzb3IoKTsKICAgIH0sCiAgICByZWZlcmVuY2VUb1N0cmluZyhyZWZlcmVuY2VOb2RlKSB7CiAgICAgIGNvbnN0IHRhcmdldE5vZGUgPSBSb290Lm5vZGVTdG9yZS5nZXRUYXJnZXROb2RlRm9yUmVmZXJlbmNlKHJlZmVyZW5jZU5vZGUpOwogICAgICByZXR1cm4gUm9vdC5hdHRyaWJ1dGVTdG9yZS5nZXRBdHRyaWJ1dGVGb3JOb2RlKHRhcmdldE5vZGUpLm5hbWU7CiAgICB9LAogICAgZnVuVG9TdHJpbmcoZnVuTm9kZSkgewogICAgICBjb25zdCBtZXRhZnVuID0gUm9vdC5tZXRhZnVuU3RvcmUuZ2V0RnJvbU5hbWUoZnVuTm9kZS5tZXRhZnVuTmFtZSk7CiAgICAgIHJldHVybiBtZXRhZnVuLm5hbWU7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgcGlja2luZygpIHsKICAgICAgLy8gaWYgKHRoaXMucGlja2luZykgewogICAgICAvLyAgIHRoaXMuJG5leHRUaWNrKCkudGhlbigoKSA9PiB7CiAgICAgIC8vICAgICB0aGlzLiRyZWZzWyJzZWFyY2hlciJdLmZvY3VzKCk7CiAgICAgIC8vICAgfSk7CiAgICAgIC8vIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["PenPositionRelation","Root","NodePicker","name","components","props","astNode","value","data","nodeStore","computed","highlighted","penStore","getPenPosition","positionType","referenceNodeId","id","relation","On","isPenBeforeMe","Before","isPenAfterMe","After","picking","pen","getIsQuerying","astNodeChildren","nodeCollection","nodeParents","length","getChildren","toArray","methods","click","setPointedNode","blur","referenceToString","referenceNode","targetNode","getTargetNodeForReference","attributeStore","getAttributeForNode","funToString","funNode","metafun","metafunStore","getFromName","metafunName","watch"],"sources":["src/components/Node.vue"],"sourcesContent":["w<template>\n  <span class=\"node-root\">\n    <span v-if=\"isPenBeforeMe\"><b>|</b></span>\n    <span\n      v-if=\"astNode.value != null\"\n      @click=\"click\"\n      :class=\"{ highlighted }\"\n      >{{ astNode.value }}</span\n    >\n    <span\n      v-else-if=\"astNode.metaname === 'Reference'\"\n      @click=\"click\"\n      :class=\"{ highlighted }\"\n      >{{ referenceToString(astNode) }}</span\n    >\n    <span v-else-if=\"astNode.metaname === 'Vector'\">\n      <span :class=\"{ highlighted }\" @click=\"click\">&lt;</span>\n      <Node :astNode=\"astNodeChildren[0]\" />,\n      <Node :astNode=\"astNodeChildren[1]\" />\n      <span :class=\"{ highlighted }\" @click=\"click\">&gt;</span>\n    </span>\n    <span v-else>\n      <span @click=\"click\" :class=\"['function', { highlighted }]\"\n        >{{ funToString(astNode) }}(</span\n      >\n      <span v-for=\"(child, index) in astNodeChildren\" :key=\"child.id\">\n        <Node :astNode=\"child\" />\n        <span v-if=\"index !== astNodeChildren.length - 1\">, </span>\n      </span>\n      <span :class=\"{ highlighted }\">)</span>\n    </span>\n    <span v-if=\"isPenAfterMe\"><b>|</b></span>\n    <!-- <NodePicker\n      ref=\"searcher\"\n      v-if=\"picking\"\n      :nodeToReplace=\"astNode\"\n      @blur=\"blur\"\n      :class=\"['searcher', { 'bring-to-front': picking }]\"\n    /> -->\n  </span>\n</template>\n\n<script>\nimport { PenPositionRelation } from \"@/store/Pen\";\nimport Root from \"../store/Root\";\nimport NodePicker from \"./NodePicker\";\n\nexport default {\n  name: \"Node\",\n  components: {\n  },\n  props: {\n    astNode: { value: 0 },\n  },\n  data: () => {\n    return {\n      Root: Root,\n      nodeStore: Root.nodeStore,\n    };\n  },\n  computed: {\n    highlighted() {\n      return (\n        Root.penStore.getPenPosition().positionType === \"Node\" &&\n        Root.penStore.getPenPosition().referenceNodeId === this.astNode.id &&\n        Root.penStore.getPenPosition().relation === PenPositionRelation.On\n      );\n    },\n    isPenBeforeMe() {\n      return (\n        Root.penStore.getPenPosition().positionType === \"Node\" &&\n        Root.penStore.getPenPosition().referenceNodeId === this.astNode.id &&\n        Root.penStore.getPenPosition().relation === PenPositionRelation.Before\n      );\n    },\n    isPenAfterMe() {\n      return (\n        Root.penStore.getPenPosition().positionType === \"Node\" &&\n        Root.penStore.getPenPosition().referenceNodeId === this.astNode.id &&\n        Root.penStore.getPenPosition().relation === PenPositionRelation.After\n      );\n    },\n    picking() {\n      return (\n        Root.pen.getPenPosition().referenceNodeId === this.astNode.id &&\n        Root.penStore.getIsQuerying()\n      );\n    },\n    astNodeChildren() {\n      Root.nodeCollection.nodeParents.length; // trigger reactive\n      return Root.nodeStore.getChildren(this.astNode).toArray();\n    },\n  },\n  methods: {\n    click() {\n      Root.penStore.setPointedNode(this.astNode);\n    },\n    blur() {\n      // Actions.blurCursor();\n    },\n    referenceToString(referenceNode) {\n      const targetNode = Root.nodeStore.getTargetNodeForReference(\n        referenceNode\n      );\n      return Root.attributeStore.getAttributeForNode(targetNode).name;\n    },\n    funToString(funNode) {\n      const metafun = Root.metafunStore.getFromName(funNode.metafunName);\n      return metafun.name;\n    },\n  },\n  watch: {\n    picking() {\n      // if (this.picking) {\n      //   this.$nextTick().then(() => {\n      //     this.$refs[\"searcher\"].focus();\n      //   });\n      // }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.searcher {\n  position: absolute;\n  top: 100%;\n}\n.node-root {\n  position: relative;\n}\n.function {\n  text-transform: lowercase;\n}\n.highlighted {\n  font-weight: bold;\n}\n.bring-to-front {\n  z-index: 1;\n}\n</style>\n"],"mappings":"AA2CA,SAAAA,mBAAA;AACA,OAAAC,IAAA;AACA,OAAAC,UAAA;AAEA;EACAC,IAAA;EACAC,UAAA,GACA;EACAC,KAAA;IACAC,OAAA;MAAAC,KAAA;IAAA;EACA;EACAC,IAAA,EAAAA,CAAA;IACA;MACAP,IAAA,EAAAA,IAAA;MACAQ,SAAA,EAAAR,IAAA,CAAAQ;IACA;EACA;EACAC,QAAA;IACAC,YAAA;MACA,OACAV,IAAA,CAAAW,QAAA,CAAAC,cAAA,GAAAC,YAAA,eACAb,IAAA,CAAAW,QAAA,CAAAC,cAAA,GAAAE,eAAA,UAAAT,OAAA,CAAAU,EAAA,IACAf,IAAA,CAAAW,QAAA,CAAAC,cAAA,GAAAI,QAAA,KAAAjB,mBAAA,CAAAkB,EAAA;IAEA;IACAC,cAAA;MACA,OACAlB,IAAA,CAAAW,QAAA,CAAAC,cAAA,GAAAC,YAAA,eACAb,IAAA,CAAAW,QAAA,CAAAC,cAAA,GAAAE,eAAA,UAAAT,OAAA,CAAAU,EAAA,IACAf,IAAA,CAAAW,QAAA,CAAAC,cAAA,GAAAI,QAAA,KAAAjB,mBAAA,CAAAoB,MAAA;IAEA;IACAC,aAAA;MACA,OACApB,IAAA,CAAAW,QAAA,CAAAC,cAAA,GAAAC,YAAA,eACAb,IAAA,CAAAW,QAAA,CAAAC,cAAA,GAAAE,eAAA,UAAAT,OAAA,CAAAU,EAAA,IACAf,IAAA,CAAAW,QAAA,CAAAC,cAAA,GAAAI,QAAA,KAAAjB,mBAAA,CAAAsB,KAAA;IAEA;IACAC,QAAA;MACA,OACAtB,IAAA,CAAAuB,GAAA,CAAAX,cAAA,GAAAE,eAAA,UAAAT,OAAA,CAAAU,EAAA,IACAf,IAAA,CAAAW,QAAA,CAAAa,aAAA;IAEA;IACAC,gBAAA;MACAzB,IAAA,CAAA0B,cAAA,CAAAC,WAAA,CAAAC,MAAA;MACA,OAAA5B,IAAA,CAAAQ,SAAA,CAAAqB,WAAA,MAAAxB,OAAA,EAAAyB,OAAA;IACA;EACA;EACAC,OAAA;IACAC,MAAA;MACAhC,IAAA,CAAAW,QAAA,CAAAsB,cAAA,MAAA5B,OAAA;IACA;IACA6B,KAAA;MACA;IAAA,CACA;IACAC,kBAAAC,aAAA;MACA,MAAAC,UAAA,GAAArC,IAAA,CAAAQ,SAAA,CAAA8B,yBAAA,CACAF,aACA;MACA,OAAApC,IAAA,CAAAuC,cAAA,CAAAC,mBAAA,CAAAH,UAAA,EAAAnC,IAAA;IACA;IACAuC,YAAAC,OAAA;MACA,MAAAC,OAAA,GAAA3C,IAAA,CAAA4C,YAAA,CAAAC,WAAA,CAAAH,OAAA,CAAAI,WAAA;MACA,OAAAH,OAAA,CAAAzC,IAAA;IACA;EACA;EACA6C,KAAA;IACAzB,QAAA;MACA;MACA;MACA;MACA;MACA;IAAA;EAEA;AACA","ignoreList":[]}]}