{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/Home.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/Home.vue","mtime":1714946187070},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/babel.config.js","mtime":1714946187052},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js","mtime":1714947394795},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZpZXdwb3J0IGZyb20gIi4vVmlld3BvcnQiOwppbXBvcnQgRXhwcmVzc29yIGZyb20gIi4vRXhwcmVzc29yIjsKaW1wb3J0IFN0b3JlR3JhcGggZnJvbSAiLi9TdG9yZUdyYXBoIjsKaW1wb3J0IFRlc3RSdW5uZXIgZnJvbSAiLi90ZXN0cy9UZXN0UnVubmVyLnZ1ZSI7CmltcG9ydCBSb290IGZyb20gIi4uL3N0b3JlL1Jvb3QiOwppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmltcG9ydCBXYXNtRXhwcmVzc29yIGZyb20gIkAvY29tcG9uZW50cy9XYXNtRXhwcmVzc29yIjsKaW1wb3J0IFdhc21Nb2R1bGUgZnJvbSAiLi4vLi4vcHVibGljL1dhc21Nb2R1bGUiOwppbXBvcnQgV2FzbSBmcm9tICIuLi8uLi9wdWJsaWMvV2FzbU1vZHVsZS53YXNtIjsKaW1wb3J0IEZ1bmN0aW9ucyBmcm9tICJAL2NvZGUvRnVuY3Rpb25zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJIb21lIiwKICBjb21wb25lbnRzOiB7CiAgICBXYXNtRXhwcmVzc29yLAogICAgVmlld3BvcnQsCiAgICBFeHByZXNzb3IsCiAgICBUZXN0UnVubmVyLAogICAgU3RvcmVHcmFwaAogIH0sCiAgcHJvcHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dFeHByZXNzb3I6IHRydWUsCiAgICAgIHNob3dTdG9yZUdyYXBoOiBmYWxzZSwKICAgICAgb2xkRXhwcmVzc29yOiBmYWxzZSwKICAgICAgdHJlZTogbnVsbAogICAgfTsKICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICBSb290LmxvYWQoKTsKICAgIFJvb3Qub3JnYW5pc21Db2xsZWN0aW9uLmluaXRSb290T3JnYW5pc20oKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBldmVudCA9PiB7CiAgICAgIHJldHVybjsKICAgICAgaWYgKGV2ZW50LmtleSA9PT0gIkFycm93VXAiICYmICFSb290LnBlblN0b3JlLmdldElzUXVlcnlpbmcoKSkgewogICAgICAgIFJvb3QucGVuU3RvcmUubW92ZUN1cnNvclVwKCk7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09ICJBcnJvd0Rvd24iICYmICFSb290LnBlblN0b3JlLmdldElzUXVlcnlpbmcoKSkgewogICAgICAgIFJvb3QucGVuU3RvcmUubW92ZUN1cnNvckRvd24oKTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICAgIGlmIChSb290LnBlblN0b3JlLmdldFBlblBvc2l0aW9uKCkucG9zaXRpb25UeXBlID09PSAiTm9kZSIpIHsKICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAiRW50ZXIiKSB7CiAgICAgICAgICBSb290LnBlblN0b3JlLnNldElzUXVlcnlpbmcodHJ1ZSk7CiAgICAgICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09ICJBcnJvd0xlZnQiICYmICFSb290LnBlblN0b3JlLmdldElzUXVlcnlpbmcoKSkgewogICAgICAgICAgUm9vdC5wZW5TdG9yZS5tb3ZlQ3Vyc29yTGVmdCgpOwogICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSAiQXJyb3dSaWdodCIgJiYgIVJvb3QucGVuU3RvcmUuZ2V0SXNRdWVyeWluZygpKSB7CiAgICAgICAgICBSb290LnBlblN0b3JlLm1vdmVDdXJzb3JSaWdodCgpOwogICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSAiRXNjYXBlIiAmJiBSb290LnBlblN0b3JlLmdldElzUXVlcnlpbmcoKSkgewogICAgICAgICAgUm9vdC5wZW5TdG9yZS5zZXRJc1F1ZXJ5aW5nKGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgUm9vdC5wZW4uZXZlbnRzLm9uKCJhZnRlclBlbkNvbW1pdCIsICgpID0+IHsKICAgICAgUm9vdC5zYXZlKCk7CiAgICB9KTsKICAgIFZ1ZS5jb25maWcuZXJyb3JIYW5kbGVyID0gKGVyciwgdm0sIGluZm8pID0+IHsKICAgICAgdGhpcy5jb25zb2xlRXJyb3IgPSB0cnVlOwogICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgIGNvbnNvbGUuZXJyb3IoaW5mbyk7CiAgICB9OwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIiwgKCkgPT4gewogICAgICB0aGlzLmNvbnNvbGVFcnJvciA9IHRydWU7CiAgICB9KTsKCiAgICAvLyAtLS0gbmV3IHN0dWZmIC0tLQoKICAgIGNvbnN0IG1vZHVsZSA9IGF3YWl0IFdhc21Nb2R1bGUoewogICAgICBsb2NhdGVGaWxlOiBwYXRoID0+IHsKICAgICAgICBpZiAocGF0aC5lbmRzV2l0aCgnLndhc20nKSkgewogICAgICAgICAgcmV0dXJuIFdhc207CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYXRoOwogICAgICB9CiAgICB9KTsKICAgIGNvbnN0IHRyZWUgPSBuZXcgbW9kdWxlLkV4cHJlc3NvclRyZWUoKTsKICAgIG1vZHVsZS5FeHByZXNzb3JUcmVlLnBvcHVsYXRlVGVzdFRyZWUodHJlZSk7CiAgICBjb25zdCBhdHRyaWJ1dGVWZWN0b3IgPSB0cmVlLmdldFJvb3RPcmdhbmlzbSgpLmdldEF0dHJpYnV0ZXMoKTsKICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBGdW5jdGlvbnMudmVjdG9yVG9BcnJheShhdHRyaWJ1dGVWZWN0b3IpOwogICAgY29uc3QgbnVtYmVyTm9kZSA9IG1vZHVsZS5OdW1iZXJOb2RlLm1ha2UoNSk7CiAgICBjb25zb2xlLmxvZyhudW1iZXJOb2RlKTsKICAgIHdpbmRvdy5udW1iZXJOb2RlID0gbnVtYmVyTm9kZTsKICAgIC8vIGNvbnNvbGUubG9nKCdoaScpOwogICAgLy8gZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgYXR0cmlidXRlcykgewogICAgLy8gICBjb25zb2xlLmxvZyhhdHRyaWJ1dGUuZ2V0TmFtZSgpKTsKICAgIC8vIH0KICAgIGF0dHJpYnV0ZXNbMF0uZ2V0Um9vdE5vZGUoKS5yZXBsYWNlKG51bWJlck5vZGUpOwogICAgewogICAgICBjb25zdCBhdHRyaWJ1dGVWZWN0b3IgPSB0cmVlLmdldFJvb3RPcmdhbmlzbSgpLmdldEF0dHJpYnV0ZXMoKTsKICAgICAgY29uc3QgYXR0cmlidXRlcyA9IEZ1bmN0aW9ucy52ZWN0b3JUb0FycmF5KGF0dHJpYnV0ZVZlY3Rvcik7CiAgICAgIGNvbnNvbGUubG9nKGF0dHJpYnV0ZXMuZ2V0KDApLmdldFJvb3ROb2RlKCkuZ2V0VmFsdWUoKSk7CiAgICB9CiAgICB0aGlzLnRyZWUgPSB0cmVlOwogIH0KfTs="},{"version":3,"names":["Viewport","Expressor","StoreGraph","TestRunner","Root","Vue","WasmExpressor","WasmModule","Wasm","Functions","name","components","props","data","showExpressor","showStoreGraph","oldExpressor","tree","mounted","load","organismCollection","initRootOrganism","document","addEventListener","event","key","penStore","getIsQuerying","moveCursorUp","preventDefault","moveCursorDown","getPenPosition","positionType","setIsQuerying","moveCursorLeft","moveCursorRight","pen","events","on","save","config","errorHandler","err","vm","info","consoleError","console","error","window","module","locateFile","path","endsWith","ExpressorTree","populateTestTree","attributeVector","getRootOrganism","getAttributes","attributes","vectorToArray","numberNode","NumberNode","make","log","getRootNode","replace","get","getValue"],"sources":["src/components/Home.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <template v-if=\"!showStoreGraph\">\n      <template v-if=\"showExpressor\">\n        <Expressor class=\"expressor\" v-if=\"oldExpressor\"/>\n        <WasmExpressor class=\"expressor\" v-else-if=\"tree\" project=\"tree\"/>\n      </template>\n      <Viewport :class=\"['viewport', { fullWidth: !showExpressor }]\" />\n    </template>\n    <StoreGraph v-else></StoreGraph>\n    <TestRunner v-if=\"false\" class=\"runner\" />\n    <button class=\"flick\" @click=\"showExpressor = !showExpressor\">Flick</button>\n    <button class=\"storeGraph\" @click=\"showStoreGraph = !showStoreGraph\">\n      Show Store Graph\n    </button>\n  </div>\n</template>\n\n<script>\nimport Viewport from \"./Viewport\";\nimport Expressor from \"./Expressor\";\nimport StoreGraph from \"./StoreGraph\";\nimport TestRunner from \"./tests/TestRunner.vue\";\nimport Root from \"../store/Root\";\nimport Vue from \"vue\";\nimport WasmExpressor from \"@/components/WasmExpressor\";\nimport WasmModule from \"../../public/WasmModule\";\nimport Wasm from \"../../public/WasmModule.wasm\";\nimport Functions from \"@/code/Functions\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    WasmExpressor,\n    Viewport,\n    Expressor,\n    TestRunner,\n    StoreGraph,\n  },\n  props: {},\n  data: function () {\n    return {\n      showExpressor: true,\n      showStoreGraph: false,\n      oldExpressor: false,\n      tree: null\n    };\n  },\n  async mounted() {\n    Root.load();\n    Root.organismCollection.initRootOrganism();\n    document.addEventListener(\"keydown\", (event) => {\n      return;\n      if (event.key === \"ArrowUp\" && !Root.penStore.getIsQuerying()) {\n        Root.penStore.moveCursorUp();\n        event.preventDefault();\n      } else if (event.key === \"ArrowDown\" && !Root.penStore.getIsQuerying()) {\n        Root.penStore.moveCursorDown();\n        event.preventDefault();\n      }\n\n      if (Root.penStore.getPenPosition().positionType === \"Node\") {\n        if (event.key === \"Enter\") {\n          Root.penStore.setIsQuerying(true);\n        } else if (\n          event.key === \"ArrowLeft\" &&\n          !Root.penStore.getIsQuerying()\n        ) {\n          Root.penStore.moveCursorLeft();\n        } else if (\n          event.key === \"ArrowRight\" &&\n          !Root.penStore.getIsQuerying()\n        ) {\n          Root.penStore.moveCursorRight();\n        } else if (event.key === \"Escape\" && Root.penStore.getIsQuerying()) {\n          Root.penStore.setIsQuerying(false);\n        }\n      }\n    });\n\n    Root.pen.events.on(\"afterPenCommit\", () => {\n      Root.save();\n    });\n\n    Vue.config.errorHandler = (err, vm, info) => {\n      this.consoleError = true;\n      console.error(err);\n      console.error(info);\n    };\n\n    window.addEventListener(\"error\", () => {\n      this.consoleError = true;\n    });\n\n    // --- new stuff ---\n\n    const module = await WasmModule({\n      locateFile: (path) => {\n        if (path.endsWith('.wasm')) {\n          return Wasm;\n        }\n        return path;\n      },\n    });\n\n    const tree = new module.ExpressorTree();\n    module.ExpressorTree.populateTestTree(tree);\n    const attributeVector = tree.getRootOrganism().getAttributes();\n    const attributes = Functions.vectorToArray(attributeVector);\n    const numberNode = module.NumberNode.make(5);\n    console.log(numberNode);\n    window.numberNode = numberNode;\n    // console.log('hi');\n    // for (const attribute of attributes) {\n    //   console.log(attribute.getName());\n    // }\n    attributes[0].getRootNode().replace(numberNode);\n\n    {\n      const attributeVector = tree.getRootOrganism().getAttributes();\n      const attributes = Functions.vectorToArray(attributeVector);\n      console.log(attributes.get(0).getRootNode().getValue());\n    }\n    this.tree = tree;\n  },\n};\n</script>\n<style scoped>\n.runner {\n  bottom: 0px;\n  right: 0px;\n  position: absolute;\n  padding: 10px;\n}\n.home {\n  display: grid;\n  position: absolute;\n  grid-template-columns: 50% 1fr;\n  grid-template-rows: 100%;\n  height: 100%;\n  width: 100%;\n  /* height: calc(100% - 40px);\n  width: calc(100% - 40px); */\n  overflow: hidden;\n  /* gap: 20px; */\n  /* padding: 20px; */\n}\n.viewport {\n  /* margin: 20px; */\n  /* border-color: black;\n  border-style: solid;\n  border-width: 1px; */\n  z-index: 1;\n}\n.expressor {\n  overflow-x: visible;\n  overflow-y: visible;\n}\n.flick {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n}\n.storeGraph {\n  position: absolute;\n  bottom: 10px;\n  left: 75px;\n}\n.fullWidth {\n  grid-column: 1 / -1;\n}\n</style>"],"mappings":"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","ignoreList":[]}]}