{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/ts-loader/index.js??ref--14-2!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/Organism.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/Organism.vue","mtime":1714946187071},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/babel.config.js","mtime":1714946187052},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js","mtime":1714947394795},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/ts-loader/index.js","mtime":1714947267504},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IFJvb3QgZnJvbSAiLi4vc3RvcmUvUm9vdCI7CmltcG9ydCBBdHRyaWJ1dGVDb21wb25lbnQgZnJvbSAiLi9BdHRyaWJ1dGUudnVlIjsKaW1wb3J0IFJlc2l6ZVNlbnNvciBmcm9tICJjc3MtZWxlbWVudC1xdWVyaWVzL3NyYy9SZXNpemVTZW5zb3IiOwppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmltcG9ydCBDb21wb25lbnQgZnJvbSAidnVlLWNsYXNzLWNvbXBvbmVudCI7CmltcG9ydCB7IFByb3AgfSBmcm9tICJ2dWUtcHJvcGVydHktZGVjb3JhdG9yIjsKaW1wb3J0IEF0dHJpYnV0ZSBmcm9tICJAL21vZGVscy9BdHRyaWJ1dGUiOwppbXBvcnQgeyBQcmltaXRpdmUgfSBmcm9tICJAL21vZGVscy9UeXBlIjsKbGV0IE9yZ2FuaXNtID0gY2xhc3MgT3JnYW5pc20gZXh0ZW5kcyBWdWUgewogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoLi4uYXJndW1lbnRzKTsKICAgIHRoaXMucm9vdCA9IFJvb3Q7CiAgICB0aGlzLmF0dHJpYnV0ZVN0b3JlID0gUm9vdC5hdHRyaWJ1dGVTdG9yZTsKICAgIHRoaXMubWV0YW9yZ2FuaXNtQ29sbGVjdGlvbiA9IFJvb3QubWV0YW9yZ2FuaXNtQ29sbGVjdGlvbjsKICAgIHRoaXMuc2VsZWN0ZWRQcmltaXRpdmVJZCA9IFJvb3QubWV0YW9yZ2FuaXNtQ29sbGVjdGlvbi5nZXRNZXRhb3JnYW5pc21zKClbMF0uaWQ7CiAgICB0aGlzLmF0dHJpYnV0ZU5hbWUgPSAiIjsKICAgIHRoaXMuZWRpdGFibGVBdHRyaWJ1dGVzID0gW107CiAgICB0aGlzLnBvc2l0aW9uID0gewogICAgICB0b3A6IDAsCiAgICAgIGxlZnQ6IDAKICAgIH07CiAgfQogIGdldCBzdHlsZSgpIHsKICAgIHJldHVybiBgbGVmdDogJHt0aGlzLnBvc2l0aW9uLmxlZnR9cHg7IHRvcDogJHt0aGlzLnBvc2l0aW9uLnRvcH1weDtgOwogIH0KICBnZXROb2RlRm9yQXR0cmlidXRlKGF0dHJpYnV0ZSkgewogICAgUm9vdC5ub2RlQ29sbGVjdGlvbi5ub2RlUGFyZW50cy5sZW5ndGg7IC8vIHRyaWdnZXIgcmVhY3RpdmUKICAgIHJldHVybiBSb290Lm5vZGVTdG9yZS5nZXRDaGlsZChSb290LmF0dHJpYnV0ZVN0b3JlLmdldFJvb3ROb2RlKGF0dHJpYnV0ZSksIDApOwogIH0KICBzcGF3bigpIHsKICAgIGNvbnN0IG1ldGFvcmdhbmlzbSA9IHRoaXMubWV0YW9yZ2FuaXNtQ29sbGVjdGlvbi5nZXRGcm9tSWQodGhpcy5zZWxlY3RlZFByaW1pdGl2ZUlkKTsKICAgIGNvbnN0IG9yZ2FuID0gdGhpcy5yb290Lm9yZ2FuaXNtQ29sbGVjdGlvbi5wdXRGcm9tTWV0YSh0aGlzLnJvb3Qud29yZENvbGxlY3Rpb24uZ2V0UmFuZG9tV29yZCgpLCBtZXRhb3JnYW5pc20pOwogICAgdGhpcy5yb290Lm9yZ2FuaXNtQ29sbGVjdGlvbi5hZGRDaGlsZCh0aGlzLm9yZ2FuaXNtLCBvcmdhbik7CiAgICB0aGlzLnJvb3Quc2F2ZSgpOwogIH0KICBhZGRBdHRyaWJ1dGUoKSB7CiAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gdGhpcy5hdHRyaWJ1dGVOYW1lID09PSAiIiA/IHRoaXMucm9vdC53b3JkQ29sbGVjdGlvbi5nZXRSYW5kb21Xb3JkKCkgOiB0aGlzLmF0dHJpYnV0ZU5hbWU7CiAgICB0aGlzLnJvb3QuYXR0cmlidXRlQ29sbGVjdGlvbi5wdXRFZGl0YWJsZSh0aGlzLm9yZ2FuaXNtLCBhdHRyaWJ1dGVOYW1lLCBQcmltaXRpdmUuVW5kZXRlcm1pbmVkKTsKICAgIHRoaXMucm9vdC5zYXZlKCk7CiAgfQogIGNsZWFyU3RvcmFnZSgpIHsKICAgIHRoaXMucm9vdC5jbGVhclN0b3JhZ2UoKTsKICB9CiAgcmVtb3ZlT3JnYW5pc20ob3JnYW5pc20pIHsKICAgIHRoaXMucm9vdC5vcmdhbmlzbUNvbGxlY3Rpb24ucmVtb3ZlKG9yZ2FuaXNtKTsKICAgIHRoaXMucm9vdC5zYXZlKCk7CiAgfQogIGluaXQoKSB7CiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy4kcmVmc1sib3JnYW5pc20iXTsKICAgIG5ldyBSZXNpemVTZW5zb3IoZWxlbWVudCwgKCkgPT4gewogICAgICB0aGlzLnJvb3Qub3JnYW5pc21MYXlvdXQucmVjYWxjdWxhdGUoKTsKICAgIH0pOwogICAgdGhpcy5yb290Lm9yZ2FuaXNtTGF5b3V0LnJlZ2lzdGVyRWxlbWVudChlbGVtZW50LCB0aGlzLm9yZ2FuaXNtLmlkKTsKICAgIHRoaXMucm9vdC5vcmdhbmlzbUxheW91dC5nZXRMb2NhbFBvc2l0aW9uT2JzZXJ2YWJsZSh0aGlzLm9yZ2FuaXNtLmlkKS5zdWJzY3JpYmUobG9jYWxQb3NpdGlvbiA9PiB7CiAgICAgIHRoaXMucG9zaXRpb24udG9wID0gbG9jYWxQb3NpdGlvbi50b3A7CiAgICAgIHRoaXMucG9zaXRpb24ubGVmdCA9IGxvY2FsUG9zaXRpb24ubGVmdDsKICAgIH0pOwogICAgQXR0cmlidXRlLm9uQXR0cmlidXRlQ291bnRDaGFuZ2VkLnN1YigoKSA9PiB7CiAgICAgIFZ1ZS5zZXQodGhpcywgImVkaXRhYmxlQXR0cmlidXRlcyIsIHRoaXMuZ2V0RWRpdGFibGVBdHRyaWJ1dGVzKCkpOwogICAgfSk7CiAgICB0aGlzLmVkaXRhYmxlQXR0cmlidXRlcyA9IHRoaXMuZ2V0RWRpdGFibGVBdHRyaWJ1dGVzKCk7CiAgfQogIGdldEVkaXRhYmxlQXR0cmlidXRlcygpIHsKICAgIHJldHVybiBBcnJheS5mcm9tKEF0dHJpYnV0ZS5nZXRFZGl0YWJsZXModGhpcy5vcmdhbmlzbSkpOwogIH0KICBnZXRNZXRhbmFtZShvcmdhbmlzbSkgewogICAgcmV0dXJuIHRoaXMucm9vdC5tZXRhb3JnYW5pc21Db2xsZWN0aW9uLmdldEZyb21JZChvcmdhbmlzbS5tZXRhb3JnYW5pc21JZCkubmFtZTsKICB9CiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLm9yZ2FuaXNtID09IG51bGwpIHsKICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5pbml0KCksIDIwMCk7CiAgICAgIHJldHVybjsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuaW5pdCgpOwogICAgfQogIH0KICBkZXN0cm95ZWQoKSB7CiAgICB0aGlzLnJvb3Qub3JnYW5pc21MYXlvdXQucmVjYWxjdWxhdGUoKTsKICB9Cn07Cl9fZGVjb3JhdGUoW1Byb3AoKV0sIE9yZ2FuaXNtLnByb3RvdHlwZSwgIm9yZ2FuaXNtIiwgdm9pZCAwKTsKX19kZWNvcmF0ZShbUHJvcCgpXSwgT3JnYW5pc20ucHJvdG90eXBlLCAiaXNSb290Iiwgdm9pZCAwKTsKT3JnYW5pc20gPSBfX2RlY29yYXRlKFtDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHsKICAgIEF0dHJpYnV0ZTogQXR0cmlidXRlQ29tcG9uZW50CiAgfQp9KV0sIE9yZ2FuaXNtKTsKZXhwb3J0IGRlZmF1bHQgT3JnYW5pc207"},{"version":3,"names":["Root","AttributeComponent","ResizeSensor","Vue","Component","Prop","Attribute","Primitive","Organism","constructor","root","attributeStore","metaorganismCollection","selectedPrimitiveId","getMetaorganisms","id","attributeName","editableAttributes","position","top","left","style","getNodeForAttribute","attribute","nodeCollection","nodeParents","length","nodeStore","getChild","getRootNode","spawn","metaorganism","getFromId","organ","organismCollection","putFromMeta","wordCollection","getRandomWord","addChild","organism","save","addAttribute","attributeCollection","putEditable","Undetermined","clearStorage","removeOrganism","remove","init","element","$refs","organismLayout","recalculate","registerElement","getLocalPositionObservable","subscribe","localPosition","onAttributeCountChanged","sub","set","getEditableAttributes","Array","from","getEditables","getMetaname","metaorganismId","name","mounted","window","setTimeout","destroyed","__decorate","components"],"sources":["/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/Organism.vue?vue&type=script&lang=ts"],"sourcesContent":["\nimport wu from \"wu\";\nimport Root from \"../store/Root\";\nimport AttributeComponent from \"./Attribute.vue\";\nimport ResizeSensor from \"css-element-queries/src/ResizeSensor\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { Prop } from \"vue-property-decorator\";\nimport Attribute from \"@/models/Attribute\";\nimport {Primitive} from \"@/models/Type\";\n\n@Component({ components: { Attribute: AttributeComponent } })\nexport default class Organism extends Vue {\n  @Prop() organism!: any;\n  @Prop() isRoot!: boolean;\n\n  root = Root;\n  attributeStore = Root.attributeStore;\n  metaorganismCollection = Root.metaorganismCollection;\n  selectedPrimitiveId = Root.metaorganismCollection.getMetaorganisms()[0].id;\n  attributeName = \"\";\n  editableAttributes = [] as any[];\n  position = {\n    top: 0,\n    left: 0,\n  };\n\n  get style() {\n    return `left: ${this.position.left}px; top: ${this.position.top}px;`;\n  }\n\n  getNodeForAttribute(attribute) {\n    Root.nodeCollection.nodeParents.length; // trigger reactive\n    return Root.nodeStore.getChild(\n      Root.attributeStore.getRootNode(attribute),\n      0\n    );\n  }\n\n  spawn() {\n    const metaorganism = this.metaorganismCollection.getFromId(\n      this.selectedPrimitiveId\n    );\n    const organ = this.root.organismCollection.putFromMeta(\n      this.root.wordCollection.getRandomWord(),\n      metaorganism\n    );\n    this.root.organismCollection.addChild(this.organism, organ);\n    this.root.save();\n  }\n\n  addAttribute() {\n    const attributeName =\n      this.attributeName === \"\"\n        ? this.root.wordCollection.getRandomWord()\n        : this.attributeName;\n    this.root.attributeCollection.putEditable(this.organism, attributeName, Primitive.Undetermined);\n    this.root.save();\n  }\n\n  clearStorage() {\n    this.root.clearStorage();\n  }\n\n  removeOrganism(organism) {\n    this.root.organismCollection.remove(organism);\n    this.root.save();\n  }\n\n  init() {\n    const element = this.$refs[\"organism\"] as any;\n    new ResizeSensor(element, () => {\n      this.root.organismLayout.recalculate();\n    });\n\n    this.root.organismLayout.registerElement(element, this.organism.id);\n    this.root.organismLayout\n      .getLocalPositionObservable(this.organism.id)\n      .subscribe((localPosition) => {\n        this.position.top = localPosition.top;\n        this.position.left = localPosition.left;\n      });\n\n    Attribute.onAttributeCountChanged.sub(() => {\n      Vue.set(this, \"editableAttributes\", this.getEditableAttributes());\n    });\n    this.editableAttributes = this.getEditableAttributes();\n  }\n\n  getEditableAttributes() {\n    return Array.from(Attribute.getEditables(this.organism));\n  }\n\n  getMetaname(organism) {\n    return this.root.metaorganismCollection.getFromId(organism.metaorganismId).name;\n  }\n\n  mounted() {\n    if (this.organism == null) {\n      window.setTimeout(() => this.init(), 200);\n      return;\n    } else {\n      this.init();\n    }\n  }\n\n  destroyed() {\n    this.root.organismLayout.recalculate();\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}