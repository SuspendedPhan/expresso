{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/ts-loader/index.js??ref--14-2!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmExpressor.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmExpressor.vue","mtime":1714946187072},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/babel.config.js","mtime":1714946187052},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js","mtime":1714947394795},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/ts-loader/index.js","mtime":1714947267504},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIFdhc21FeHByZXNzb3JfMTsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IENvbXBvbmVudCBmcm9tICJ2dWUtY2xhc3MtY29tcG9uZW50IjsKaW1wb3J0IHsgUHJvcCB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmltcG9ydCBXYXNtT3JnYW5pc20gZnJvbSAiQC9jb21wb25lbnRzL1dhc21PcmdhbmlzbS52dWUiOwppbXBvcnQgeyBFbGVtZW50TGF5b3V0IH0gZnJvbSAiQC9jb2RlL0VsZW1lbnRMYXlvdXQiOwppbXBvcnQgRnVuY3Rpb25zIGZyb20gIkAvY29kZS9GdW5jdGlvbnMiOwppbXBvcnQgcGFuem9vbSBmcm9tICJwYW56b29tIjsKaW1wb3J0IFJlc2l6ZVNlbnNvciBmcm9tICJjc3MtZWxlbWVudC1xdWVyaWVzL3NyYy9SZXNpemVTZW5zb3IiOwpsZXQgV2FzbUV4cHJlc3NvciA9IFdhc21FeHByZXNzb3JfMSA9IGNsYXNzIFdhc21FeHByZXNzb3IgZXh0ZW5kcyBWdWUgewogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoLi4uYXJndW1lbnRzKTsKICAgIHRoaXMucm9vdE9yZ2FuaXNtID0gbnVsbDsKICAgIHRoaXMub3JnYW5pc21MYXlvdXQgPSBudWxsOwogICAgdGhpcy5jb25zb2xlRXJyb3IgPSBmYWxzZTsKICAgIHRoaXMuY2FudmFzV2lkdGggPSAwOwogICAgdGhpcy5jYW52YXNIZWlnaHQgPSAwOwogICAgdGhpcy5wYW56b29tVHJhbnNmb3JtID0ge307CiAgICB0aGlzLmxpbmVzID0gW107CiAgfQogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICB0aGlzLnJvb3RPcmdhbmlzbSA9IHRoaXMucHJvamVjdC5nZXRSb290T3JnYW5pc20oKTsKICAgIHRoaXMub3JnYW5pc21MYXlvdXQgPSBuZXcgRWxlbWVudExheW91dCgoKSA9PiB0aGlzLnJvb3RPcmdhbmlzbSwgV2FzbUV4cHJlc3Nvcl8xLmdldENoaWxkcmVuLCBXYXNtRXhwcmVzc29yXzEuZ2V0S2V5LCBob3Jpem9udGFsTWFyZ2luLCB2ZXJ0aWNhbE1hcmdpbik7CiAgICB0aGlzLm9sZE1vdW50ZWQoKTsKICB9CiAgc3RhdGljIGdldENoaWxkcmVuKG9yZ2FuaXNtKSB7CiAgICByZXR1cm4gRnVuY3Rpb25zLnZlY3RvclRvQXJyYXkob3JnYW5pc20uZ2V0U3Vib3JnYW5pc21zKCkpOwogIH0KICBzdGF0aWMgZ2V0S2V5KG9yZ2FuaXNtKSB7CiAgICByZXR1cm4gb3JnYW5pc20uZ2V0SWQoKTsKICB9CiAgLy8gLS0tIG9sZCBzdHVmZiAtLS0KICBvbGRNb3VudGVkKCkgewogICAgY29uc3QgcHogPSBwYW56b29tKHRoaXMuJHJlZnNbInBhbnpvb20iXSwgewogICAgICBiZWZvcmVNb3VzZURvd246IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHNob3VsZElnbm9yZSA9ICFlLmFsdEtleTsKICAgICAgICByZXR1cm4gc2hvdWxkSWdub3JlOwogICAgICB9LAogICAgICBmaWx0ZXJLZXk6IGZ1bmN0aW9uIC8qIGUsIGR4LCBkeSwgZHogKi8KICAgICAgKCkgewogICAgICAgIC8vIGRvbid0IGxldCBwYW56b29tIGhhbmRsZSB0aGlzIGV2ZW50OgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9LAogICAgICB6b29tRG91YmxlQ2xpY2tTcGVlZDogMQogICAgfSk7CiAgICBwei5vbigidHJhbnNmb3JtIiwgZSA9PiB7CiAgICAgIHRoaXMucGFuem9vbVRyYW5zZm9ybSA9IHB6LmdldFRyYW5zZm9ybSgpOwogICAgICB0aGlzLmRyYXdMaW5lcygpOwogICAgfSk7CiAgICAvLyBOT1RFOiBtYXliZSBjYW4gcmVtb3ZlPwogICAgY29uc3QgZXhwcmVzc29yRWxlbWVudCA9IHRoaXMuJHJlZnNbImV4cHJlc3NvciJdOwogICAgdGhpcy5jYW52YXNXaWR0aCA9IGV4cHJlc3NvckVsZW1lbnQuY2xpZW50V2lkdGg7CiAgICB0aGlzLmNhbnZhc0hlaWdodCA9IGV4cHJlc3NvckVsZW1lbnQuY2xpZW50SGVpZ2h0OwogICAgbmV3IFJlc2l6ZVNlbnNvcihleHByZXNzb3JFbGVtZW50LCAoKSA9PiB7CiAgICAgIHRoaXMuY2FudmFzV2lkdGggPSBleHByZXNzb3JFbGVtZW50LmNsaWVudFdpZHRoOwogICAgICB0aGlzLmNhbnZhc0hlaWdodCA9IGV4cHJlc3NvckVsZW1lbnQuY2xpZW50SGVpZ2h0OwogICAgfSk7CiAgICB0aGlzLm9yZ2FuaXNtTGF5b3V0Lm9uQ2FsY3VsYXRlZC5zdWJzY3JpYmUob3V0cHV0ID0+IHsKICAgICAgdGhpcy5saW5lcyA9IG91dHB1dC5saW5lczsKICAgICAgdGhpcy5kcmF3TGluZXMoKTsKICAgIH0pOwogIH0KICAvLyBjbGVhclN0b3JhZ2UoKSB7CiAgLy8gICB0aGlzLnJvb3QuY2xlYXJTdG9yYWdlKCk7CiAgLy8gfQogIGRyYXdMaW5lcygpIHsKICAgIGNvbnN0IGNhbnZhc0VsZW1lbnQgPSB0aGlzLiRyZWZzWyJjYW52YXMiXTsKICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXNFbGVtZW50LmdldENvbnRleHQoIjJkIik7CiAgICBjb250ZXh0LnJlc2V0VHJhbnNmb3JtKCk7CiAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhc1dpZHRoLCB0aGlzLmNhbnZhc0hlaWdodCk7CiAgICBjb25zdCB0cmFuc2Zvcm0gPSB0aGlzLnBhbnpvb21UcmFuc2Zvcm07CiAgICBjb250ZXh0LnNldFRyYW5zZm9ybSh0cmFuc2Zvcm0uc2NhbGUsIDAsIDAsIHRyYW5zZm9ybS5zY2FsZSwgdHJhbnNmb3JtLngsIHRyYW5zZm9ybS55KTsKICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAiZ3JheSI7CiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgdGhpcy5saW5lcykgewogICAgICBjb250ZXh0LmJlZ2luUGF0aCgpOwogICAgICBjb250ZXh0Lm1vdmVUbyhsaW5lLnN0YXJ0WCwgbGluZS5zdGFydFkpOwogICAgICBjb250ZXh0LmxpbmVUbyhsaW5lLmVuZFgsIGxpbmUuZW5kWSk7CiAgICAgIGNvbnRleHQuc3Ryb2tlKCk7CiAgICB9CiAgfQp9OwpfX2RlY29yYXRlKFtQcm9wKCldLCBXYXNtRXhwcmVzc29yLnByb3RvdHlwZSwgInByb2plY3QiLCB2b2lkIDApOwpXYXNtRXhwcmVzc29yID0gV2FzbUV4cHJlc3Nvcl8xID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBXYXNtT3JnYW5pc20KICB9Cn0pXSwgV2FzbUV4cHJlc3Nvcik7CmV4cG9ydCBkZWZhdWx0IFdhc21FeHByZXNzb3I7"},{"version":3,"names":["Component","Prop","Vue","WasmOrganism","ElementLayout","Functions","panzoom","ResizeSensor","WasmExpressor","WasmExpressor_1","constructor","rootOrganism","organismLayout","consoleError","canvasWidth","canvasHeight","panzoomTransform","lines","mounted","project","getRootOrganism","getChildren","getKey","horizontalMargin","verticalMargin","oldMounted","organism","vectorToArray","getSuborganisms","getId","pz","$refs","beforeMouseDown","e","shouldIgnore","altKey","filterKey","zoomDoubleClickSpeed","on","getTransform","drawLines","expressorElement","clientWidth","clientHeight","onCalculated","subscribe","output","canvasElement","context","getContext","resetTransform","clearRect","transform","setTransform","scale","x","y","strokeStyle","line","beginPath","moveTo","startX","startY","lineTo","endX","endY","stroke","__decorate","components"],"sources":["/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmExpressor.vue?vue&type=script&lang=ts"],"sourcesContent":["\n\nimport Component from \"vue-class-component\";\nimport {Prop, Provide} from \"vue-property-decorator\";\nimport Vue from \"vue\";\nimport WasmOrganism from \"@/components/WasmOrganism.vue\";\nimport {ElementLayout} from \"@/code/ElementLayout\";\nimport Functions from \"@/code/Functions\";\n\nimport panzoom from \"panzoom\";\nimport ResizeSensor from \"css-element-queries/src/ResizeSensor\";\nimport WasmPen from \"@/code/WasmPen\";\n\n@Component({\n  components: {WasmOrganism}\n})\nexport default class WasmExpressor extends Vue {\n  @Prop()\n  project;\n\n  rootOrganism = null;\n  organismLayout = null as any;\n\n  consoleError = false;\n  canvasWidth = 0;\n  canvasHeight = 0;\n  panzoomTransform = {};\n  lines = [];\n\n  async mounted() {\n    this.rootOrganism = this.project.getRootOrganism();\n    this.organismLayout = new ElementLayout(() => this.rootOrganism, WasmExpressor.getChildren, WasmExpressor.getKey, horizontalMargin, verticalMargin);\n    this.oldMounted();\n  }\n\n  private static getChildren(organism) {\n    return Functions.vectorToArray(organism.getSuborganisms());\n  }\n\n  private static getKey(organism) {\n    return organism.getId();\n  }\n\n  // --- old stuff ---\n\n  oldMounted() {\n    const pz = panzoom(this.$refs[\"panzoom\"] as any, {\n      beforeMouseDown: function (e) {\n        var shouldIgnore = !e.altKey;\n        return shouldIgnore;\n      },\n      filterKey: function (/* e, dx, dy, dz */) {\n        // don't let panzoom handle this event:\n        return true;\n      },\n      zoomDoubleClickSpeed: 1,\n    });\n    pz.on(\"transform\", (e) => {\n      this.panzoomTransform = pz.getTransform();\n      this.drawLines();\n    });\n\n    // NOTE: maybe can remove?\n    const expressorElement = this.$refs[\"expressor\"] as any;\n    this.canvasWidth = expressorElement.clientWidth;\n    this.canvasHeight = expressorElement.clientHeight;\n\n    new ResizeSensor(expressorElement as any, () => {\n      this.canvasWidth = expressorElement.clientWidth;\n      this.canvasHeight = expressorElement.clientHeight;\n    });\n\n    this.organismLayout.onCalculated.subscribe((output) => {\n      this.lines = output.lines;\n      this.drawLines();\n    });\n  }\n\n  // clearStorage() {\n  //   this.root.clearStorage();\n  // }\n\n  drawLines() {\n    const canvasElement = this.$refs[\"canvas\"] as any;\n    const context = canvasElement.getContext(\"2d\");\n    context.resetTransform();\n    context.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n    const transform = this.panzoomTransform as any;\n    context.setTransform(\n        transform.scale,\n        0,\n        0,\n        transform.scale,\n        transform.x,\n        transform.y\n    );\n    context.strokeStyle = \"gray\";\n    for (const line of this.lines as any) {\n      context.beginPath();\n      context.moveTo(line.startX, line.startY);\n      context.lineTo(line.endX, line.endY);\n      context.stroke();\n    }\n  }\n}\n\n"],"mappings":"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","ignoreList":[]}]}