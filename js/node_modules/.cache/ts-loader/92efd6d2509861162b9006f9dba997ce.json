{"remainingRequest":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/ts-loader/index.js??ref--14-2!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmOrganism.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmOrganism.vue","mtime":1714946187073},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/babel.config.js","mtime":1714946187052},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/babel-loader/lib/index.js","mtime":1714947394795},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/ts-loader/index.js","mtime":1714947267504},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js","mtime":1714947270264},{"path":"/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js","mtime":1714947393584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IFJvb3QgZnJvbSAiLi4vc3RvcmUvUm9vdCI7CmltcG9ydCBXYXNtQXR0cmlidXRlIGZyb20gIi4vV2FzbUF0dHJpYnV0ZS52dWUiOwppbXBvcnQgUmVzaXplU2Vuc29yIGZyb20gImNzcy1lbGVtZW50LXF1ZXJpZXMvc3JjL1Jlc2l6ZVNlbnNvciI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IENvbXBvbmVudCBmcm9tICJ2dWUtY2xhc3MtY29tcG9uZW50IjsKaW1wb3J0IHsgUHJvcCB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgRnVuY3Rpb25zIGZyb20gIkAvY29kZS9GdW5jdGlvbnMiOwpsZXQgV2FzbU9yZ2FuaXNtID0gY2xhc3MgV2FzbU9yZ2FuaXNtIGV4dGVuZHMgVnVlIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICB0aGlzLmF0dHJpYnV0ZVN0b3JlID0gUm9vdC5hdHRyaWJ1dGVTdG9yZTsKICAgIHRoaXMubWV0YW9yZ2FuaXNtQ29sbGVjdGlvbiA9IFJvb3QubWV0YW9yZ2FuaXNtQ29sbGVjdGlvbjsKICAgIHRoaXMuc2VsZWN0ZWRQcmltaXRpdmVJZCA9IFJvb3QubWV0YW9yZ2FuaXNtQ29sbGVjdGlvbi5nZXRNZXRhb3JnYW5pc21zKClbMF0uaWQ7CiAgICB0aGlzLmF0dHJpYnV0ZU5hbWUgPSAiIjsKICAgIHRoaXMuZWRpdGFibGVBdHRyaWJ1dGVzID0gW107CiAgICB0aGlzLnBvc2l0aW9uID0gewogICAgICB0b3A6IDAsCiAgICAgIGxlZnQ6IDAKICAgIH07CiAgICB0aGlzLm5hbWUgPSAiIjsKICAgIHRoaXMuc3Vib3JnYW5pc21zID0gW107CiAgfQogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy5vcmdhbmlzbSA9PSBudWxsKSB7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuaW5pdCgpLCAyMDApOwogICAgICByZXR1cm47CiAgICB9IGVsc2UgewogICAgICB0aGlzLmluaXQoKTsKICAgIH0KICB9CiAgZGVzdHJveWVkKCkgewogICAgdGhpcy5vcmdhbmlzbUxheW91dC5yZWNhbGN1bGF0ZSgpOwogIH0KICBnZXQgc3R5bGUoKSB7CiAgICByZXR1cm4gYGxlZnQ6ICR7dGhpcy5wb3NpdGlvbi5sZWZ0fXB4OyB0b3A6ICR7dGhpcy5wb3NpdGlvbi50b3B9cHg7YDsKICB9CiAgc3Bhd24oKSB7CiAgICBjb25zdCBtZXRhb3JnYW5pc20gPSB0aGlzLm1ldGFvcmdhbmlzbUNvbGxlY3Rpb24uZ2V0RnJvbUlkKHRoaXMuc2VsZWN0ZWRQcmltaXRpdmVJZCk7CiAgICAvLyBjb25zdCBvcmdhbiA9IHRoaXMucm9vdC5vcmdhbmlzbUNvbGxlY3Rpb24ucHV0RnJvbU1ldGEoCiAgICAvLyAgICAgdGhpcy5yb290LndvcmRDb2xsZWN0aW9uLmdldFJhbmRvbVdvcmQoKSwKICAgIC8vICAgICBtZXRhb3JnYW5pc20KICAgIC8vICk7CiAgICAvLyB0aGlzLnJvb3Qub3JnYW5pc21Db2xsZWN0aW9uLmFkZENoaWxkKHRoaXMub3JnYW5pc20sIG9yZ2FuKTsKICAgIC8vIHRoaXMucm9vdC5zYXZlKCk7CiAgfQogIGFkZEF0dHJpYnV0ZSgpIHsKICAgIC8vIGNvbnN0IGF0dHJpYnV0ZU5hbWUgPQogICAgLy8gICAgIHRoaXMuYXR0cmlidXRlTmFtZSA9PT0gIiIKICAgIC8vICAgICAgICAgPyB0aGlzLnJvb3Qud29yZENvbGxlY3Rpb24uZ2V0UmFuZG9tV29yZCgpCiAgICAvLyAgICAgICAgIDogdGhpcy5hdHRyaWJ1dGVOYW1lOwogICAgLy8gdGhpcy5yb290LmF0dHJpYnV0ZUNvbGxlY3Rpb24ucHV0RWRpdGFibGUodGhpcy5vcmdhbmlzbSwgYXR0cmlidXRlTmFtZSwgUHJpbWl0aXZlLlVuZGV0ZXJtaW5lZCk7CiAgICAvLyB0aGlzLnJvb3Quc2F2ZSgpOwogIH0KICBjbGVhclN0b3JhZ2UoKSB7CiAgICAvLyB0aGlzLnJvb3QuY2xlYXJTdG9yYWdlKCk7CiAgfQogIHJlbW92ZU9yZ2FuaXNtKG9yZ2FuaXNtKSB7CiAgICAvLyB0aGlzLnJvb3Qub3JnYW5pc21Db2xsZWN0aW9uLnJlbW92ZShvcmdhbmlzbSk7CiAgICAvLyB0aGlzLnJvb3Quc2F2ZSgpOwogIH0KICBpbml0KCkgewogICAgY29uc3QgZWxlbWVudCA9IHRoaXMuJHJlZnNbIm9yZ2FuaXNtIl07CiAgICBuZXcgUmVzaXplU2Vuc29yKGVsZW1lbnQsICgpID0+IHsKICAgICAgdGhpcy5vcmdhbmlzbUxheW91dC5yZWNhbGN1bGF0ZSgpOwogICAgfSk7CiAgICB0aGlzLm9yZ2FuaXNtTGF5b3V0LnJlZ2lzdGVyRWxlbWVudChlbGVtZW50LCB0aGlzLm9yZ2FuaXNtLmdldElkKCkpOwogICAgdGhpcy5vcmdhbmlzbUxheW91dC5nZXRMb2NhbFBvc2l0aW9uT2JzZXJ2YWJsZSh0aGlzLm9yZ2FuaXNtLmdldElkKCkpLnN1YnNjcmliZShsb2NhbFBvc2l0aW9uID0+IHsKICAgICAgdGhpcy5wb3NpdGlvbi50b3AgPSBsb2NhbFBvc2l0aW9uLnRvcDsKICAgICAgdGhpcy5wb3NpdGlvbi5sZWZ0ID0gbG9jYWxQb3NpdGlvbi5sZWZ0OwogICAgfSk7CiAgICAvLyBBdHRyaWJ1dGUub25BdHRyaWJ1dGVDb3VudENoYW5nZWQuc3ViKCgpID0+IHsKICAgIC8vICAgVnVlLnNldCh0aGlzLCAiZWRpdGFibGVBdHRyaWJ1dGVzIiwgdGhpcy5nZXRFZGl0YWJsZUF0dHJpYnV0ZXMoKSk7CiAgICAvLyB9KTsKICAgIC8vIHRoaXMuZWRpdGFibGVBdHRyaWJ1dGVzID0gdGhpcy5nZXRFZGl0YWJsZUF0dHJpYnV0ZXMoKTsKICAgIHRoaXMubmFtZSA9IHRoaXMub3JnYW5pc20uZ2V0TmFtZSgpOwogICAgY29uc3QgYXR0cmlidXRlcyA9IEZ1bmN0aW9ucy52ZWN0b3JUb0FycmF5KHRoaXMub3JnYW5pc20uZ2V0QXR0cmlidXRlcygpKS5maWx0ZXIoYXR0cmlidXRlID0+IGF0dHJpYnV0ZS5jb25zdHJ1Y3Rvci5uYW1lID09PSAiRWRpdGFibGVBdHRyaWJ1dGUiKTsKICAgIHRoaXMuZWRpdGFibGVBdHRyaWJ1dGVzID0gYXR0cmlidXRlczsKICB9CiAgZ2V0TWV0YW5hbWUob3JnYW5pc20pIHsKICAgIHJldHVybiAnbm90IGltcGxlbWVudGVkJzsKICAgIC8vIHJldHVybiB0aGlzLnJvb3QubWV0YW9yZ2FuaXNtQ29sbGVjdGlvbi5nZXRGcm9tSWQob3JnYW5pc20ubWV0YW9yZ2FuaXNtSWQpLm5hbWU7CiAgfQp9OwpfX2RlY29yYXRlKFtQcm9wKCldLCBXYXNtT3JnYW5pc20ucHJvdG90eXBlLCAib3JnYW5pc20iLCB2b2lkIDApOwpfX2RlY29yYXRlKFtQcm9wKCldLCBXYXNtT3JnYW5pc20ucHJvdG90eXBlLCAiaXNSb290Iiwgdm9pZCAwKTsKX19kZWNvcmF0ZShbUHJvcCgpXSwgV2FzbU9yZ2FuaXNtLnByb3RvdHlwZSwgIm9yZ2FuaXNtTGF5b3V0Iiwgdm9pZCAwKTsKV2FzbU9yZ2FuaXNtID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBXYXNtQXR0cmlidXRlOiBXYXNtQXR0cmlidXRlCiAgfQp9KV0sIFdhc21PcmdhbmlzbSk7CmV4cG9ydCBkZWZhdWx0IFdhc21PcmdhbmlzbTs="},{"version":3,"names":["Root","WasmAttribute","ResizeSensor","Vue","Component","Prop","Functions","WasmOrganism","constructor","attributeStore","metaorganismCollection","selectedPrimitiveId","getMetaorganisms","id","attributeName","editableAttributes","position","top","left","name","suborganisms","mounted","organism","window","setTimeout","init","destroyed","organismLayout","recalculate","style","spawn","metaorganism","getFromId","addAttribute","clearStorage","removeOrganism","element","$refs","registerElement","getId","getLocalPositionObservable","subscribe","localPosition","getName","attributes","vectorToArray","getAttributes","filter","attribute","getMetaname","__decorate","components"],"sources":["/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dylan.phan/stuff/expr-explorations/expresso/js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dylan.phan/stuff/expr-explorations/expresso/js/src/components/WasmOrganism.vue?vue&type=script&lang=ts"],"sourcesContent":["\nimport wu from \"wu\";\nimport Root from \"../store/Root\";\nimport WasmAttribute from \"./WasmAttribute.vue\";\nimport ResizeSensor from \"css-element-queries/src/ResizeSensor\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport {Prop} from \"vue-property-decorator\";\nimport {Primitive} from \"@/models/Type\";\nimport Functions from \"@/code/Functions\";\n\n@Component({components: {WasmAttribute: WasmAttribute}})\nexport default class WasmOrganism extends Vue {\n  @Prop() organism!: any;\n  @Prop() isRoot!: boolean;\n  @Prop() organismLayout;\n\n  attributeStore = Root.attributeStore;\n  metaorganismCollection = Root.metaorganismCollection;\n  selectedPrimitiveId = Root.metaorganismCollection.getMetaorganisms()[0].id;\n  attributeName = \"\";\n  editableAttributes = [] as any[];\n  position = {\n    top: 0,\n    left: 0,\n  };\n\n  name = \"\";\n  suborganisms = [];\n\n  mounted() {\n    if (this.organism == null) {\n      window.setTimeout(() => this.init(), 200);\n      return;\n    } else {\n      this.init();\n    }\n  }\n\n  destroyed() {\n    this.organismLayout.recalculate();\n  }\n\n  get style() {\n    return `left: ${this.position.left}px; top: ${this.position.top}px;`;\n  }\n\n  spawn() {\n    const metaorganism = this.metaorganismCollection.getFromId(\n        this.selectedPrimitiveId\n    );\n    // const organ = this.root.organismCollection.putFromMeta(\n    //     this.root.wordCollection.getRandomWord(),\n    //     metaorganism\n    // );\n    // this.root.organismCollection.addChild(this.organism, organ);\n    // this.root.save();\n  }\n\n  addAttribute() {\n    // const attributeName =\n    //     this.attributeName === \"\"\n    //         ? this.root.wordCollection.getRandomWord()\n    //         : this.attributeName;\n    // this.root.attributeCollection.putEditable(this.organism, attributeName, Primitive.Undetermined);\n    // this.root.save();\n  }\n\n  clearStorage() {\n    // this.root.clearStorage();\n  }\n\n  removeOrganism(organism) {\n    // this.root.organismCollection.remove(organism);\n    // this.root.save();\n  }\n\n  init() {\n    const element = this.$refs[\"organism\"] as any;\n    new ResizeSensor(element, () => {\n      this.organismLayout.recalculate();\n    });\n\n    this.organismLayout.registerElement(element, this.organism.getId());\n    this.organismLayout\n        .getLocalPositionObservable(this.organism.getId())\n        .subscribe((localPosition) => {\n          this.position.top = localPosition.top;\n          this.position.left = localPosition.left;\n        });\n\n    // Attribute.onAttributeCountChanged.sub(() => {\n    //   Vue.set(this, \"editableAttributes\", this.getEditableAttributes());\n    // });\n    // this.editableAttributes = this.getEditableAttributes();\n\n    this.name = this.organism.getName();\n    const attributes = Functions.vectorToArray(this.organism.getAttributes())\n        .filter(attribute => attribute.constructor.name === \"EditableAttribute\");\n    this.editableAttributes = attributes;\n  }\n\n  getMetaname(organism) {\n    return 'not implemented';\n    // return this.root.metaorganismCollection.getFromId(organism.metaorganismId).name;\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}